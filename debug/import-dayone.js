/**
 * Created by Zizy on 17/09/2017.
 */


let dayOne ={
  "metadata" : {
    "version" : "1.0"
  },
  "entries" : [
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13726043701172,
            "latitude" : 22.2857666015625
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13726043701172,
        "administrativeArea" : "香港",
        "placeName" : "香港第三街179号",
        "latitude" : 22.2857666015625
      },
      "sourceString" : "visit-F63F0D96-C248-4CD5-B989-9F4B35776686",
      "userActivity" : {
        "activityName" : "Stationary"
      },
      "text" : "security照常听不懂下午学DL的一天\n\n![](dayone-moment:\/\/A2D2A9E21A974625BA31922EDC6EDADE)\n\n心情3.5分。大推薰衣草精油让我八点多就睡醒了还不困！虽然可能是心理作用。\n中午吃了美心被说天菜的口水鸡。\n下午学习coursera…不知道时间怎么就过去啦。荒废了好多天英语！\n晚上security老师越来越天书了……但反正自己要放弃了……\n感冒终于好的差不多。开心。\n\/\/\/\/晚上又和小姐姐用英语智障聊天八卦，有时候觉得小姐姐是一个很深藏不露的人啊。",
      "creationDate" : "2017-10-30T16:07:03Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "0C748A200CAB4ED5A24946170764BDCD",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "A2D2A9E21A974625BA31922EDC6EDADE",
          "height" : 2048,
          "md5" : "69f14cfda0c73f74da2123fd2470eb2b",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "creationDate" : "2017-11-01T02:30:00Z",
      "sourceString" : "visit-F63F0D96-C248-4CD5-B989-9F4B35776686",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 11
      },
      "text" : "上课debug差点丢了学生证学习到十二点的一天\n\n![](dayone-moment:\/\/C5009BA2B07F43379B39162E7813A0B4)\n\n心情3分。中午的越南餐厅踩雷！下午健身吃完饭以为自己掉了学生证啊还好果然在洗衣机。\n星巴克好早关门，学校学习到十二点，感觉自习室通宵的成就达成指日可待！",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "0E448CB4ABE8430591DB5E8951C61A64",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "C5009BA2B07F43379B39162E7813A0B4",
          "height" : 2048,
          "md5" : "d6de9ea643da8cb01162debcbd804597",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13752746582031,
            "latitude" : 22.285404205322266
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13752746582031,
        "administrativeArea" : "香港",
        "placeName" : "香港第三街200号–208号",
        "latitude" : 22.285404205322266
      },
      "sourceString" : "visit-82968C7B-4D4A-4394-B328-E939906C4127",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 69
      },
      "text" : "继续帮忙debug学习coursera的一天\n\n![](dayone-moment:\/\/C90B2BE031514C0FAD6B2F096379B482)\n\n心情3.5分。其实也就是很普通的看看视频开开会。\n决定了group assignment方向好开心。晚上四人甜品趴还是很开心的，似乎又摄入了过多的热量！\n没做什么但就是觉得是一个很typical的校园开心一天。",
      "weather" : {
        "sunsetDate" : "2017-11-02T09:46:44Z",
        "temperatureCelsius" : 23,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 90,
        "sunriseDate" : "2017-11-01T22:29:03Z",
        "conditionsDescription" : "Mostly Clear",
        "pressureMB" : 1016,
        "visibilityKM" : 11.265407562255859,
        "relativeHumidity" : 69,
        "windSpeedKPH" : 15,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 23
      },
      "creationDate" : "2017-11-01T16:34:45Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "16931183F718460BA6617635F8E52CEE",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "C90B2BE031514C0FAD6B2F096379B482",
          "height" : 2048,
          "md5" : "851e14dc5214c9848d8508050ce65bb5",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13737487792969,
            "latitude" : 22.285547256469727
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13737487792969,
        "administrativeArea" : "香港",
        "placeName" : "香港第三街179号",
        "latitude" : 22.285547256469727
      },
      "sourceString" : "visit-7B21DB1B-0EF9-4747-B3E9-81B924673F29",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 37
      },
      "text" : "日常学习的一天\n\n![](dayone-moment:\/\/F719CDE134E84CCBB674620E37B37DC4)\n\n心情3分。早上打卡了家附近的金拱门。\n下午学习终于到了tensorflow。感觉一个终于修成正果？？？\n晚上的羊排好吃到我对这家店的崇拜之情再涨一百分。\n开公司已经历时两个月了吧……搞不懂为什么会辣么麻烦。",
      "weather" : {
        "sunsetDate" : "2017-11-03T09:46:11Z",
        "temperatureCelsius" : 24,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 80,
        "sunriseDate" : "2017-11-02T22:29:36Z",
        "conditionsDescription" : "Mostly Clear",
        "pressureMB" : 1014,
        "visibilityKM" : 11.265407562255859,
        "relativeHumidity" : 65,
        "windSpeedKPH" : 9,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 24
      },
      "creationDate" : "2017-11-02T17:24:25Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "D3A97B4BC73E4B62BF4E5C5852CADB0D",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "F719CDE134E84CCBB674620E37B37DC4",
          "height" : 2048,
          "md5" : "f90b1d897891723980c659f4394c8917",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13749694824219,
            "latitude" : 22.285842895507812
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13749694824219,
        "administrativeArea" : "香港",
        "placeName" : "香港第三街179号",
        "latitude" : 22.285842895507812
      },
      "creationDate" : "2017-11-05T03:29:42Z",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 18
      },
      "text" : "学习一个人逛街买衣服的一天\n\n![](dayone-moment:\/\/6C49A0D166704312B0B409A7F5805A79)\n\n心情3分。中午吃了鳗鱼饭感觉水准还是不错的！\n做完了cousera的第二课作业，接下来就是准备第三课啦。计划完成40%～\n健身感觉不知道什么时候才会看到效果！\n总是一点点点变好起来的吧！\n晚上逛街发现很好吃的咖喱味兰州拉面…\n一条街少数的不排队。\n逛了很久衣服觉得买衣服实在是很难的事情！\n太难了！",
      "weather" : {
        "sunsetDate" : "2017-11-05T09:45:08Z",
        "temperatureCelsius" : 24,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 40,
        "sunriseDate" : "2017-11-04T22:30:42Z",
        "conditionsDescription" : "Mostly Sunny",
        "pressureMB" : 1020,
        "visibilityKM" : 8,
        "relativeHumidity" : 44,
        "windSpeedKPH" : 9,
        "weatherCode" : "fair",
        "windChillCelsius" : 24
      },
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "DD3A161536B6406696D888891EDBBBE7",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "6C49A0D166704312B0B409A7F5805A79",
          "height" : 2048,
          "md5" : "cb3808b24001733d828ebbb1b987e67e",
          "focalLength" : "(null)"
        }
      ]
    }
  ]};


let structured = dayOne.entries.map(i => {
  return {
    img_url: 'http://owdi2r4ca.bkt.clouddn.com/' + i.photos[0].md5 + '.jpeg?imageView2/2/w/400/h/400/interlace/1/q/100',
    title: i.text.substr(0, i.text.indexOf('![]')),
    content: i.text.substr(i.text.lastIndexOf(')\n\n') + 2, i.text.indexOf('////') != -1 ? i.text.indexOf('////') - i.text.lastIndexOf(')\n\n') - 2 : undefined),
    date: i.creationDate,
    id: i.uuid,
    place: i.location && i.location.placeName
  }
});
console.log(structured)
