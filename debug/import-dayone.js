/**
 * Created by Zizy on 17/09/2017.
 */
let dayOne = {
  "metadata": {
    "version": "1.0"
  },
  "entries": [
    {
      "starred": false,
      "location": {
        "region": {
          "center": {
            "longitude": 114.13619232177734,
            "latitude": 22.285776138305664
          },
          "radius": 75
        },
        "localityName": "é¦™æ¸¯",
        "country": "é¦™æ¸¯",
        "longitude": 114.13619232177734,
        "administrativeArea": "é¦™æ¸¯",
        "placeName": "é¦™æ¸¯çš‡åŽå¤§é“è¥¿470å·",
        "latitude": 22.285776138305664
      },
      "sourceString": "visit-0F635239-F759-40B1-B01B-4B727C12FD57",
      "userActivity": {
        "activityName": "Stationary"
      },
      "text": "ä»Šå¤©æ˜¯è‡ªå­¦ã€å¥³ç§Ÿå®¢çœ‹æˆ¿ã€è‹¦ç“œå¥½éš¾åƒã€ç…Žé±¼åˆå¤±è´¥çš„ä¸€å¤©ï¼\n\n![](dayone-moment:\/\/9890FAA8A4334D86BB7081EFFAE824CC)\n\nå…¶å®žå¥½åƒéƒ½å¦‚é¢˜äº†ã€‚\nåƒäº†ç´ é£Ÿæ„Ÿè§‰å¥½åƒéƒ½æ²¡å˜åŒ–å•Šæœ‰ç‚¹æ‚²ä¼¤\nå…¬å¸å¯èƒ½åˆè¦æŽ¨ä¸€æ˜ŸæœŸå¼„å¥½äº†ï¼\nä¸çŸ¥é“ä¸ºä»€ä¹ˆç…Žé±¼è¿˜æ˜¯ä¸æˆåŠŸðŸ˜©\næ°”æ­»äº†çœŸçš„æ˜¯ï¼Œéžå¸¸ï¼Œç”Ÿæ°”äº†",
      "weather": {
        "sunsetDate": "2017-09-16T10:26:57Z",
        "temperatureCelsius": 29,
        "weatherServiceName": "HAMweather",
        "windBearing": 0,
        "sunriseDate": "2017-09-15T22:11:21Z",
        "conditionsDescription": "Mostly Clear",
        "pressureMB": 1010,
        "visibilityKM": 48.280319213867188,
        "relativeHumidity": 74,
        "windSpeedKPH": 2,
        "weatherCode": "cloudy-night",
        "windChillCelsius": 29
      },
      "creationDate": "2017-09-15T16:16:05Z",
      "timeZone": "Asia\/Hong_Kong",
      "uuid": "D5782561F5064DD29E8B6F3C7298EF71",
      "duration": 0,
      "photos": [
        {
          "fnumber": "(null)",
          "orderInEntry": 0,
          "width": 2048,
          "type": "jpeg",
          "identifier": "9890FAA8A4334D86BB7081EFFAE824CC",
          "height": 2048,
          "md5": "2a62a0c36e32a74bf619f8bbc96ebbd3",
          "focalLength": "(null)"
        }
      ]
    },
    {
      "starred": false,
      "location": {
        "region": {
          "center": {
            "longitude": 114.13615417480469,
            "latitude": 22.285772323608398
          },
          "radius": 75
        },
        "localityName": "é¦™æ¸¯",
        "country": "é¦™æ¸¯",
        "longitude": 114.13615417480469,
        "administrativeArea": "é¦™æ¸¯",
        "placeName": "é¦™æ¸¯çš‡åŽå¤§é“è¥¿470å·",
        "latitude": 22.285772323608398
      },
      "sourceString": "visit-E6CB2044-2E49-47FE-AA76-9DB5CDE69603",
      "userActivity": {
        "activityName": "Stationary"
      },
      "text": "å¯ä»¥è¯´æ˜¯å¾ˆé•¿å¾ˆé•¿å¾ˆå¼€å¿ƒçš„ä¸€å¤©äº†\n\n![](dayone-moment:\/\/288406ADB24F48D88D02E0D2B65AA7D9)\n\nsocialç¨‹åº¦å’Œå¹¸ç¦æ„Ÿæˆæ­£æ¯”æžä¸å¥½è¿™å¥è¯æ²¡æœ‰é”™ä¹Ÿä¸ä¸€å®šã€‚\nä»Šå¤©ä¸€èµ·åƒäº†ç«é”…ï¼\nè™½ç„¶å‘³é“åªæ˜¯ç®—æ™®é€šä½†æ˜¯è¿™ç§æ„Ÿè§‰çœŸçš„æ˜¯å¾ˆæ£’å•Šï¼\nå¯èƒ½åœ¨é¦™æ¸¯çš„ç”Ÿæ´»å°±å¿«æ…¢æ…¢é€‚åº”äº†å§ï¼Œ\næ€»è§‰å¾—å¼€å§‹çš„æ—¥å­éƒ½å¾ˆéš¾è¿‡ã€‚\nç„¶åŽå°±æ…¢æ…¢å˜å¾—å¥½èµ·æ¥\næ™šä¸Šæœ¬æ¥å¾ˆä¸æƒ³åŽ»çš„çˆ¬å±±\nè®¤è¯†äº†å¾ˆå¤šäººé˜¿çœŸçš„æ˜¯ï¼\næœ¬æ¥ä»¥ä¸ºè‡ªå·±ä¼šå¾ˆå°¬\nä¸è¿‡ä¼¼ä¹Žä¹Ÿå°±è¿˜å¥½çš„æ ·å­ã€‚\næ¯•ç«Ÿç¯é‚£ä¹ˆé»‘ï¼Œåæ­£ä¸çŸ¥é“æ˜¯è°ðŸŒš",
      "weather": {
        "sunsetDate": "2017-09-17T10:25:58Z",
        "temperatureCelsius": 31,
        "weatherServiceName": "HAMweather",
        "windBearing": 240,
        "sunriseDate": "2017-09-16T22:11:38Z",
        "conditionsDescription": "Mostly Clear",
        "pressureMB": 1009,
        "visibilityKM": 48.280319213867188,
        "relativeHumidity": 66,
        "windSpeedKPH": 11,
        "weatherCode": "cloudy-night",
        "windChillCelsius": 31
      },
      "creationDate": "2017-09-16T16:20:13Z",
      "timeZone": "Asia\/Hong_Kong",
      "uuid": "9AB60684036647489B579E6F1F1BB53A",
      "duration": 0,
      "photos": [
        {
          "fnumber": "(null)",
          "orderInEntry": 0,
          "width": 2048,
          "type": "jpeg",
          "identifier": "288406ADB24F48D88D02E0D2B65AA7D9",
          "height": 2048,
          "md5": "ac085adbf1b44eec59e6795ad8d59f6a",
          "focalLength": "(null)"
        }
      ]
    },
    {
      "starred": false,
      "location": {
        "region": {
          "center": {
            "longitude": 114.13567352294922,
            "latitude": 22.285724639892578
          },
          "radius": 75
        },
        "localityName": "é¦™æ¸¯",
        "country": "é¦™æ¸¯",
        "longitude": 114.13567352294922,
        "administrativeArea": "é¦™æ¸¯",
        "placeName": "é¦™æ¸¯çš‡åŽå¤§é“è¥¿476å·",
        "latitude": 22.285724639892578
      },
      "sourceString": "visit-63681BD5-462A-455E-930D-BA96F4B8CC9D",
      "userActivity": {
        "activityName": "Walking"
      },
      "text": "ç»ˆäºŽç…Žé±¼æˆåŠŸäº†ï¼ï¼ï¼çš„ä¸€å¤©\n\n![](dayone-moment:\/\/33590A893447473A8304FB43D62036DC)\n\næ—©ä¸Šå¾ˆæ—©ç¡é†’ï¼Œ\nä¸‹åˆåœ¨æ™ºåŽè§‰å¾—ï¼Œè¿˜æ˜¯è¯´è‡ªå­¦å¥½å¬ä¸€ç‚¹\nä¸€ç²¥é¢çš„çš®è›‹ç²¥å®Œå…¨æ˜¯ç™½ç²¥å•Šå·®è¯„ã€‚\næ™šä¸Šç…Žäº†äººç”Ÿç¬¬ä¸€æ¡å®Œæ•´ç…Žé±¼ã€‚\nä¸€ä¸‹åˆåœ¨åµæž¶ä¸çŸ¥é“åœ¨åµä»€ä¹ˆâ€¦â€¦\nç¢ç£¨ä¸é€çš„æ„Ÿæƒ…\n\/\/\/\/ä¸çŸ¥é“åœ¨å®³ç¾žä»€ä¹ˆä¸‹åˆå°±æ²¡æœ‰è§ï¼Œä¹‹å‰æ˜Žæ˜Žæ¯æ¬¡è¿™ç§å¥‡å¦™çš„æ„Ÿè§‰éƒ½ä¼šé—´éš”å¾ˆä¹…ã€‚\nè¿™ä¸€æ¬¡å®žåœ¨æ˜¯æœ‰ç‚¹æŽªæ‰‹ä¸åŠçš„å„ç§å¿«ã€‚å¾ˆè®©è‡ªå·±æ€€ç–‘è‡ªå·±æ˜¯ä¸æ˜¯è„‘å­å‡ºé—®é¢˜äº†æ‰ä¼šå–œæ¬¢é‚£ä¹ˆå¤šäººã€‚",
      "weather": {
        "sunsetDate": "2017-09-18T10:24:58Z",
        "temperatureCelsius": 31,
        "weatherServiceName": "HAMweather",
        "windBearing": 190,
        "sunriseDate": "2017-09-17T22:11:55Z",
        "conditionsDescription": "Mostly Clear",
        "pressureMB": 1009,
        "visibilityKM": 9,
        "relativeHumidity": 66,
        "windSpeedKPH": 7,
        "weatherCode": "cloudy-night",
        "windChillCelsius": 31
      },
      "creationDate": "2017-09-17T16:14:15Z",
      "timeZone": "Asia\/Hong_Kong",
      "uuid": "759385B74544465C978A54FA5B6846DF",
      "duration": 0,
      "photos": [
        {
          "fnumber": "(null)",
          "orderInEntry": 0,
          "width": 2048,
          "type": "jpeg",
          "identifier": "33590A893447473A8304FB43D62036DC",
          "height": 2048,
          "md5": "1b5aeaf76eb938afe7231cb4370f2f60",
          "focalLength": "(null)"
        }
      ]
    },
    {
      "starred": false,
      "location": {
        "region": {
          "center": {
            "longitude": 114.13613891601562,
            "latitude": 22.285772323608398
          },
          "radius": 75
        },
        "localityName": "é¦™æ¸¯",
        "country": "é¦™æ¸¯",
        "longitude": 114.13613891601562,
        "administrativeArea": "é¦™æ¸¯",
        "placeName": "é¦™æ¸¯çš‡åŽå¤§é“è¥¿470å·",
        "latitude": 22.285772323608398
      },
      "sourceString": "visit-5739A0D9-A774-4289-9C27-3C7355F32DA3",
      "userActivity": {
        "activityName": "Stationary"
      },
      "text": "å‘ç”Ÿäº†è¯¡å¼‚äº‹æƒ…çš„ä¸€å¤©\n\n![](dayone-moment:\/\/D5D0C3989AFD4F4EB26942FEBDE914FE)\n\nä¸­åˆåƒäº†ä¸€ç²¥é¢çš„æžé¢+äº‘åžè§‰å¾—åˆè¸©é›·\nä¸‹åˆå¼€å§‹æ–°çš„ä¸€è½®åµæž¶\nç„¶åŽæ€è€ƒäº†å¾ˆå¤šä¹‹å‰éƒ½æ²¡è€ƒè™‘è¿‡çš„é—®é¢˜ã€‚\nè™½ç„¶å¹³å¤ä¸‹æ¥è§‰å¾—ä¸€åˆ‡éƒ½å¯ä»¥æŽ¥å—ã€‚\nä½†å§‹ç»ˆè‡ªå·±åšä¸å‡ºä»€ä¹ˆå¥½çš„é€‰æ‹©ã€‚\næ„Ÿæƒ…æ€»å½’æ˜¯ä¸€ä»¶ç‰¹åˆ«ç‰¹åˆ«ç‰¹åˆ«çƒ¦äººçš„äº‹æƒ…é˜¿ï¼\nåªæ˜¯æœ‰æ—¶å€™æ€»è§‰å¾—è¿™æ ·æŸç§æ„ä¹‰ä¸Šçš„æˆé•¿ï¼Œå¯èƒ½å¹¶ä¸è§å¾—æ˜¯ä¸€ä»¶å¥½äº‹ã€‚\nä½†æ˜¯ä¸–ç•Œä¸Šå°±æ˜¯æœ‰äº›ä¸œè¥¿ï¼Œå¯ä»¥å¾ˆç®€å•çš„ä»ŽAåˆ°è¾¾Bï¼Œåä¹‹å°±å¾ˆéš¾ã€‚",
      "weather": {
        "sunsetDate": "2017-09-19T10:23:58Z",
        "temperatureCelsius": 30,
        "weatherServiceName": "HAMweather",
        "windBearing": 130,
        "sunriseDate": "2017-09-18T22:12:12Z",
        "conditionsDescription": "Mostly Clear",
        "pressureMB": 1010,
        "visibilityKM": 48.280319213867188,
        "relativeHumidity": 66,
        "windSpeedKPH": 15,
        "weatherCode": "cloudy-night",
        "windChillCelsius": 30
      },
      "creationDate": "2017-09-18T17:00:16Z",
      "timeZone": "Asia\/Hong_Kong",
      "uuid": "AD4BBFB34CB04284940FD330D419357F",
      "duration": 0,
      "photos": [
        {
          "fnumber": "(null)",
          "orderInEntry": 0,
          "width": 2048,
          "type": "jpeg",
          "identifier": "D5D0C3989AFD4F4EB26942FEBDE914FE",
          "height": 2048,
          "md5": "0816964229125f67cf6230402a36ab55",
          "focalLength": "(null)"
        }
      ]
    }
  ]
};


let structured = dayOne.entries.map(i => {
  return {
    img_url: 'http://owdi2r4ca.bkt.clouddn.com/' + i.photos[0].md5 + '.jpeg?imageView2/2/w/400/h/400/interlace/1/q/100',
    title: i.text.substr(0, i.text.indexOf('![]')),
    content: i.text.substr(i.text.lastIndexOf(')\n\n') + 2, i.text.indexOf('////') != -1? i.text.indexOf('////') - i.text.lastIndexOf(')\n\n') - 2 : undefined),
    date: i.creationDate,
    id: i.uuid,
    place: i.location && i.location.placeName
  }
});
console.log(structured)
