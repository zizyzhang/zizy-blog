/**
 * Created by Zizy on 17/09/2017.
 */


let dayOne ={
  "metadata" : {
    "version" : "1.0"
  },
  "entries" : [
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 113.92120361328125,
            "latitude" : 22.516208648681641
          },
          "radius" : 75
        },
        "localityName" : "Shenzhen",
        "country" : "China",
        "longitude" : 113.92120361328125,
        "administrativeArea" : "Guangdong",
        "placeName" : "Nanhai Boulevard, Shenzhen",
        "latitude" : 22.516208648681641
      },
      "creationDate" : "2018-02-22T09:09:53Z",
      "text" : "感冒不开心的三天\n\n![](dayone-moment:\/\/3F90ADC093F344A2BB75597DFAB6E457)\n\n心情3分。终于送走母亲觉得一阵释然。找到了新的蜗居地点。\n没有发生什么事情就是好事情。\n网站越来越给人不安心的感觉。\n一定会有越来越多的竞争者，而一步错则步步错。接下来的每一步都要小心谨慎。不然就会出问题。\n已经有太多太多问题了。\n如果掉到谷底，对自己的打击也会是很大很大的吧。\n\n\n\/\/\/\/在努力了很多次以后终于约炮成功。因为彼此都是第一次，感觉还是挺好的。感觉身体上某种程度的被弥补。至少在某个时刻突然有一种充实的感觉。晚上突然不知道自己为什么要读书，自己所读的书，大概这辈子的努力也赚不到现在这么多的钱。不过总归是一个后路，一条稳妥的后路吧。",
      "weather" : {
        "sunsetDate" : "2018-02-22T10:24:54Z",
        "temperatureCelsius" : 13,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 40,
        "sunriseDate" : "2018-02-21T22:51:40Z",
        "conditionsDescription" : "Cloudy",
        "pressureMB" : 1019,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 88,
        "windSpeedKPH" : 14,
        "weatherCode" : "cloudy",
        "windChillCelsius" : 13
      },
      "timeZone" : "Asia\/Shanghai",
      "uuid" : "7DC0FFC844BE4E7891CBD13F962B3F34",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "3F90ADC093F344A2BB75597DFAB6E457",
          "date" : "2018-02-22T18:00:28Z",
          "location" : {
            "region" : {
              "center" : {
                "longitude" : 113.92018,
                "latitude" : 22.515047500000001
              },
              "identifier" : "<+22.51504750,+113.92018000> radius 49.24",
              "radius" : 49.240891369165546
            },
            "localityName" : "Shenzhen",
            "country" : "China",
            "timeZoneName" : "Asia\/Shanghai",
            "administrativeArea" : "Guangdong",
            "longitude" : 113.92021942138672,
            "placeName" : "No.1004-1 Nanshan Avenue",
            "latitude" : 22.51496696472168
          },
          "weather" : {
            "weatherServiceName" : "Forecast.io",
            "windBearing" : 25,
            "conditionsDescription" : "Partly Cloudy",
            "pressureMB" : 1020.7000122070312,
            "visibilityKM" : 10.010000228881836,
            "relativeHumidity" : 87,
            "windSpeedKPH" : 10.319999694824219,
            "weatherCode" : "cloudy-night",
            "temperatureCelsius" : 12.310000419616699
          },
          "height" : 2048,
          "md5" : "3800439b6474adf8c32077df25829f78",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "creationDate" : "2018-02-28T12:11:58Z",
      "text" : "忙碌也不是特别充实的六天\n\n![](dayone-moment:\/\/207ED1751BE04305A7F09BF3C0303F5A)\n\n本来以为会生活一切回到正轨。\n但是似乎这逐渐变成了奢望。\n周末在家好像并没有做什么有意义的事情。\n周二的时候再次被徐州的机房欺负，\n干脆把所有的节点放到了海外，\n只留下国内的CDN加速节点。\n这样应该就不再有什么法律风险了吧。\n除了阿里云机房可能还有风险。\n但目前看起来都还一切正常。\n突然有点释然，之后再有什么问题也似乎都慢慢的看淡了。\n不能够再有什么奇怪的事情发生了吧。\n终于有一点点的时间做学校的事情，\n然后就是被导师无限压榨，\n觉得自己顺利毕业变成了一件似乎有点难完成的事情。",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "10689FA9B78949459A9D861A749ED4AA",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "207ED1751BE04305A7F09BF3C0303F5A",
          "date" : "2018-02-28T12:21:13Z",
          "location" : {
            "region" : {
              "center" : {
                "longitude" : 114.13513183593744,
                "latitude" : 22.285753249392869
              },
              "identifier" : "<+22.28575325,+114.13513184> radius 70.92",
              "radius" : 70.916247663557741
            },
            "localityName" : "Hong Kong",
            "country" : "Hong Kong",
            "timeZoneName" : "Asia\/Hong_Kong",
            "administrativeArea" : "Hong Kong",
            "longitude" : 114.1351318359375,
            "placeName" : "54 Hill Road, Hong Kong",
            "latitude" : 22.28575325012207
          },
          "weather" : {
            "weatherServiceName" : "Forecast.io",
            "windBearing" : 217,
            "conditionsDescription" : "Clear",
            "pressureMB" : 1012.8099975585938,
            "visibilityKM" : 8,
            "relativeHumidity" : 84,
            "windSpeedKPH" : 5.7100000381469727,
            "weatherCode" : "clear-night",
            "temperatureCelsius" : 21.209999084472656
          },
          "height" : 2048,
          "md5" : "1ef5ce08ba6ecd00f4545e9e7af88851",
          "focalLength" : "(null)"
        }
      ]
    }
  ]};


let structured = dayOne.entries.map(i => {
  return {
    img_url: 'http://owdi2r4ca.bkt.clouddn.com/' + i.photos[0].md5 + '.jpeg?imageView2/2/w/400/h/400/interlace/1/q/100',
    title: i.text.substr(0, i.text.indexOf('![]')),
    content: i.text.substr(i.text.lastIndexOf(')\n\n') + 2, i.text.indexOf('////') != -1 ? i.text.indexOf('////') - i.text.lastIndexOf(')\n\n') - 2 : undefined),
    date: i.creationDate,
    id: i.uuid,
    place: i.location && i.location.placeName
  }
});
console.log(structured)
