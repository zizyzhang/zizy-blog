/**
 * Created by Zizy on 17/09/2017.
 */
let dayOne ={
  "metadata" : {
    "version" : "1.0"
  },
  "entries" : [
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13515472412109,
            "latitude" : 22.285905838012695
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13515472412109,
        "administrativeArea" : "香港",
        "placeName" : "香港山道20号–28号",
        "latitude" : 22.285905838012695
      },
      "sourceString" : "visit-BA20ACCF-4614-4F8C-B6CC-7D655BB5F87A",
      "userActivity" : {
        "activityName" : "Stationary"
      },
      "text" : "常规学习健身吃日料接机的一天\n\n![](dayone-moment:\/\/0A96E2943A6F4221A6DA7F2E8B5B5187)\n\n心情3.5分。做作业做的心绞痛，\n中午日料只有普通水准算不上非常好吃但是手卷超好吃啊。\n蛋白粉差点吃到一个丧命……果然不能一口气吃太多啊？？？\n晚上接机顺利。学习感觉效率有待更高。",
      "weather" : {
        "sunsetDate" : "2017-10-18T09:57:04Z",
        "temperatureCelsius" : 25,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 40,
        "sunriseDate" : "2017-10-17T22:21:53Z",
        "conditionsDescription" : "Partly Cloudy",
        "pressureMB" : 1014,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 74,
        "windSpeedKPH" : 22,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 25
      },
      "creationDate" : "2017-10-17T16:37:09Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "D17415FF134E4BB3BE49713026C254F5",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "0A96E2943A6F4221A6DA7F2E8B5B5187",
          "date" : "2017-10-18T16:37:09Z",
          "location" : {
            "region" : {
              "center" : {
                "longitude" : 114.13515472412109,
                "latitude" : 22.285905835095825
              },
              "identifier" : "<+22.28590584,+114.13515472> radius 141.83",
              "radius" : 141.83260700660401
            },
            "localityName" : "香港",
            "country" : "香港",
            "timeZoneName" : "Asia\/Hong_Kong",
            "administrativeArea" : "香港",
            "longitude" : 114.13515472412109,
            "placeName" : "香港山道20号–28号",
            "latitude" : 22.285905838012695
          },
          "weather" : {
            "sunsetDate" : "2017-10-19T09:56:16Z",
            "temperatureCelsius" : 26,
            "weatherServiceName" : "HAMweather",
            "windBearing" : 30,
            "sunriseDate" : "2017-10-18T22:22:18Z",
            "conditionsDescription" : "Partly Cloudy",
            "pressureMB" : 1013,
            "visibilityKM" : 48.280319213867188,
            "relativeHumidity" : 65,
            "windSpeedKPH" : 13,
            "weatherCode" : "cloudy-night",
            "windChillCelsius" : 26
          },
          "height" : 2048,
          "md5" : "4fd54bfbbcd893b7b9eccef7f59a6f35",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13746643066406,
            "latitude" : 22.285228729248047
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13746643066406,
        "administrativeArea" : "香港",
        "placeName" : "香港第三街200号–208号",
        "latitude" : 22.285228729248047
      },
      "sourceString" : "visit-BA20ACCF-4614-4F8C-B6CC-7D655BB5F87A",
      "userActivity" : {
        "activityName" : "Stationary"
      },
      "text" : "小分队聚餐九记无敌好吃不会做作业的一天\n\n![](dayone-moment:\/\/1A08239B54474B95A288A45A646D8CB4)\n\n心情3.5分。还是没能早起。吃了mx的鸡肉猪肉饭。下午健身的有点用力，但是有减肥中的感觉。作业真是明明做了那么久了还是觉得没做好, 范围很宽也不知道怎么才能复习好了。晚上去吃九记，虽然位置有点点偏但是真是对得起它的名声。从此成为最好吃牛肉面Top5.",
      "weather" : {
        "sunsetDate" : "2017-10-19T09:56:16Z",
        "temperatureCelsius" : 26,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 50,
        "sunriseDate" : "2017-10-18T22:22:18Z",
        "conditionsDescription" : "Partly Cloudy",
        "pressureMB" : 1013,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 65,
        "windSpeedKPH" : 13,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 26
      },
      "creationDate" : "2017-10-18T16:00:34Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "448FF637F875450B91BB01E0A0D9494F",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "1A08239B54474B95A288A45A646D8CB4",
          "height" : 2048,
          "md5" : "2f7391836ecebf820e5ec82aa38414f5",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13753509521484,
            "latitude" : 22.285852432250977
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13753509521484,
        "administrativeArea" : "香港",
        "placeName" : "香港第三街179号",
        "latitude" : 22.285852432250977
      },
      "sourceString" : "visit-A188E2F2-ADF9-44FC-A2D0-C5885E7002F0",
      "userActivity" : {
        "activityName" : "Stationary"
      },
      "text" : "吃日料自助看电影的一天\n\n![](dayone-moment:\/\/8DC8745E407C4896AD556CF0F2E4FEC5)\n\n心情3.5分。感觉一天学习的时间不知道为什么那么短！起床九点多背个单词发呆一下就十一点了。洗头准备出门十二点吃完饭十二点半到学校开始学习一点钟四点钟健身五点半吃饭八点钟看电影十点钟看完十一点回家十一点半洗完澡……真是…一天好短啊？？？",
      "weather" : {
        "sunsetDate" : "2017-10-20T09:55:29Z",
        "temperatureCelsius" : 24,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 40,
        "sunriseDate" : "2017-10-19T22:22:44Z",
        "conditionsDescription" : "Mostly Clear",
        "pressureMB" : 1013,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 61,
        "windSpeedKPH" : 17,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 24
      },
      "creationDate" : "2017-10-19T16:01:38Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "0D91B07A624C4BE4BE1B1C9CE03FE6A2",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "8DC8745E407C4896AD556CF0F2E4FEC5",
          "height" : 2048,
          "md5" : "ddfb8a302844ffbd8a2aa32d50d29326",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.1373291015625,
            "latitude" : 22.285696029663086
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.1373291015625,
        "administrativeArea" : "香港",
        "placeName" : "香港第三街179号",
        "latitude" : 22.285696029663086
      },
      "creationDate" : "2017-10-21T15:26:30Z",
      "text" : "对着一道题发了一下午呆的一天\n\n![](dayone-moment:\/\/263F6949CD3D45869C5A451B39875009)\n\n心情2.5分。早上想早点起床的。结果起来吃完早餐又睡着了……真可怕。\n下午看security不知道为什么和答案不一样想了一下午，很有挫败感不开心。感觉别人都会的样子更不开心了。\n晚上吃SU才知道鸡脾是鸡腿。健身没精神。吃了夜宵勉强开心一点点但是不怎么好吃。\n逛了五家超市都买不到无糖咖啡。无限循环的怀念台湾。",
      "weather" : {
        "sunsetDate" : "2017-10-21T09:54:43Z",
        "temperatureCelsius" : 23,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 50,
        "sunriseDate" : "2017-10-20T22:23:10Z",
        "conditionsDescription" : "Mostly Clear",
        "pressureMB" : 1013,
        "visibilityKM" : 11.265407562255859,
        "relativeHumidity" : 53,
        "windSpeedKPH" : 19,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 23
      },
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "A28788F30AFB4E4B9A0CD750463207E7",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "263F6949CD3D45869C5A451B39875009",
          "height" : 2048,
          "md5" : "7913e200d5cafaef99b41d30639761ab",
          "focalLength" : "(null)"
        }
      ]
    }
  ]};


let structured = dayOne.entries.map(i => {
  return {
    img_url: 'http://owdi2r4ca.bkt.clouddn.com/' + i.photos[0].md5 + '.jpeg?imageView2/2/w/400/h/400/interlace/1/q/100',
    title: i.text.substr(0, i.text.indexOf('![]')),
    content: i.text.substr(i.text.lastIndexOf(')\n\n') + 2, i.text.indexOf('////') != -1? i.text.indexOf('////') - i.text.lastIndexOf(')\n\n') - 2 : undefined),
    date: i.creationDate,
    id: i.uuid,
    place: i.location && i.location.placeName
  }
});
console.log(structured)
