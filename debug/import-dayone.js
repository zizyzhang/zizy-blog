/**
 * Created by Zizy on 17/09/2017.
 */


let dayOne ={
  "metadata" : {
    "version" : "1.0"
  },
  "entries" : [
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13749694824219,
            "latitude" : 22.285842895507812
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13749694824219,
        "administrativeArea" : "香港",
        "placeName" : "香港第三街179号",
        "latitude" : 22.285842895507812
      },
      "sourceString" : "visit-6B37CDBC-6082-4CF4-92E7-F35DD41F8041",
      "userActivity" : {
        "activityName" : "Walking",
        "stepCount" : 13
      },
      "text" : "学习一个人逛街买衣服的一天\n\n![](dayone-moment:\/\/6C49A0D166704312B0B409A7F5805A79)\n\n心情3分。中午吃了鳗鱼饭感觉水准还是不错的！\n做完了cousera的第二课作业，接下来就是准备第三课啦。计划完成40%～\n健身感觉不知道什么时候才会看到效果！\n总是一点点点变好起来的吧！\n晚上逛街发现很好吃的咖喱味兰州拉面…\n一条街少数的不排队。",
      "weather" : {
        "sunsetDate" : "2017-11-04T09:45:39Z",
        "temperatureCelsius" : 25,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 40,
        "sunriseDate" : "2017-11-03T22:30:09Z",
        "conditionsDescription" : "Mostly Sunny",
        "pressureMB" : 1020,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 39,
        "windSpeedKPH" : 24,
        "weatherCode" : "fair",
        "windChillCelsius" : 25
      },
      "creationDate" : "2017-11-04T03:29:42Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "DD3A161536B6406696D888891EDBBBE7",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "6C49A0D166704312B0B409A7F5805A79",
          "height" : 2048,
          "md5" : "cb3808b24001733d828ebbb1b987e67e",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13456726074219,
            "latitude" : 22.283308029174805
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13456726074219,
        "administrativeArea" : "香港",
        "placeName" : "The University of Hong Kong",
        "latitude" : 22.283308029174805
      },
      "creationDate" : "2017-11-05T15:27:20Z",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 7970
      },
      "text" : "继续买衣服吃土的一天\n\n![](dayone-moment:\/\/57FE170D5C124F6381998CCDA7572046)\n\n心情3分。被aape打开新世界的大门之后有点停不下来。\n每天起床都在后悔为什么昨晚没有早点睡。\n今天整理了一下衣服然后去买衣服啦。\n真的是很好看的衣服阿。\n晚上打卡了一直想去的牛肉面店。\n回来没有健身，呆在智华。\n学习的感觉很好但是有点难集中精神。",
      "weather" : {
        "sunsetDate" : "2017-11-05T09:45:08Z",
        "temperatureCelsius" : 25,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 70,
        "sunriseDate" : "2017-11-04T22:30:42Z",
        "conditionsDescription" : "Mostly Clear",
        "pressureMB" : 1018,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 44,
        "windSpeedKPH" : 17,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 25
      },
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "F8C4C13B1E2349628A8D168670F42F64",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "57FE170D5C124F6381998CCDA7572046",
          "height" : 2048,
          "md5" : "2da4befacf54f08a150264a020019fa0",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13661193847656,
            "latitude" : 22.282978057861328
          },
          "radius" : 75
        },
        "localityName" : "Hong Kong",
        "country" : "Hong Kong",
        "longitude" : 114.13661193847656,
        "administrativeArea" : "Hong Kong",
        "placeName" : "The University of Hong Kong",
        "latitude" : 22.282978057861328
      },
      "sourceString" : "visit-41B03CA0-37F9-4AEF-BEDF-65F4523B1E43",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 503
      },
      "text" : "换衣服失败打乒乓球的一天\n\n![](dayone-moment:\/\/1E5B3F90ED92441FAD1761D9575810CC)\n\n心情3分。白天学习了一下，顺便开了第三次小组会议。\n火龙果居然挺好吃的！\n晚上想换衣服但是依然失败干脆就不换了！\n豚王的限定并不好吃啊就是花生酱嘛。\n很久没打乒乓了！",
      "weather" : {
        "sunsetDate" : "2017-11-06T09:44:39Z",
        "temperatureCelsius" : 24,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 50,
        "sunriseDate" : "2017-11-05T22:31:16Z",
        "conditionsDescription" : "Mostly Sunny",
        "pressureMB" : 1018,
        "visibilityKM" : 11.265407562255859,
        "relativeHumidity" : 54,
        "windSpeedKPH" : 7,
        "weatherCode" : "fair",
        "windChillCelsius" : 24
      },
      "creationDate" : "2017-11-06T02:33:51Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "529FDA4F172E4245BAD93FAA25F28B00",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "1E5B3F90ED92441FAD1761D9575810CC",
          "date" : "2017-11-07T02:33:51Z",
          "location" : {
            "region" : {
              "center" : {
                "longitude" : 114.13661193847659,
                "latitude" : 22.282978054944905
              },
              "identifier" : "<+22.28297805,+114.13661194> radius 141.83",
              "radius" : 141.83262393371902
            },
            "localityName" : "Hong Kong",
            "country" : "Hong Kong",
            "timeZoneName" : "Asia\/Hong_Kong",
            "administrativeArea" : "Hong Kong",
            "longitude" : 114.13661193847656,
            "placeName" : "The University of Hong Kong",
            "latitude" : 22.282978057861328
          },
          "weather" : {
            "sunsetDate" : "2017-11-07T09:44:10Z",
            "temperatureCelsius" : 23,
            "weatherServiceName" : "HAMweather",
            "windBearing" : 350,
            "sunriseDate" : "2017-11-06T22:31:51Z",
            "conditionsDescription" : "Partly Cloudy",
            "pressureMB" : 1017,
            "visibilityKM" : 9,
            "relativeHumidity" : 69,
            "windSpeedKPH" : 11,
            "weatherCode" : "fair",
            "windChillCelsius" : 23
          },
          "height" : 2048,
          "md5" : "215d306bb315746c8da89dba35d3519d",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13726043701172,
            "latitude" : 22.285650253295898
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13726043701172,
        "administrativeArea" : "香港",
        "placeName" : "香港第三街179号",
        "latitude" : 22.285650253295898
      },
      "sourceString" : "visit-04175E04-E9C2-440B-B1CD-1BFFE55CA4BB",
      "userActivity" : {
        "activityName" : "Walking",
        "stepCount" : 471
      },
      "text" : "上课自习无所事事的一天\n\n![](dayone-moment:\/\/B07796EEDF73400EBE26FAD49C0AE24F)\n\n心情3分。很常规的上课。没有什么特别的事情发生……晚上security课非常没有状态，所以有点不想听课了！\n\/\/\/\/衣服拉入坑真的是一件非常不开心的事情！现在有点不知道如何收场了……😭😭😭真是烦到爆炸啊。",
      "weather" : {
        "sunsetDate" : "2017-11-07T09:44:10Z",
        "temperatureCelsius" : 22,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 70,
        "sunriseDate" : "2017-11-06T22:31:51Z",
        "conditionsDescription" : "Rain",
        "pressureMB" : 1016,
        "visibilityKM" : 9,
        "relativeHumidity" : 78,
        "windSpeedKPH" : 9,
        "weatherCode" : "rain-night",
        "windChillCelsius" : 22
      },
      "creationDate" : "2017-11-06T16:05:51Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "8CAD32BA05B445F0A34A16D83432AC4C",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "B07796EEDF73400EBE26FAD49C0AE24F",
          "height" : 2048,
          "md5" : "47d1d8bcffa96c041b24574a19574e36",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13468933105469,
            "latitude" : 22.283361434936523
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13468933105469,
        "administrativeArea" : "香港",
        "placeName" : "The University of Hong Kong",
        "latitude" : 22.283361434936523
      },
      "creationDate" : "2017-11-08T06:57:58Z",
      "userActivity" : {
        "activityName" : "Biking",
        "stepCount" : 2471
      },
      "text" : "终于换成功衣服的一天\n\n![](dayone-moment:\/\/748D70DCD7AA48F9BEC09938929C02DE)\n\n心情3分。中午喝了粥感觉还是这家点心店比较符合我的味蕾。\n下午换了衣服，晚上学习和健身半小时。\nSU的新食物还不错！",
      "weather" : {
        "sunsetDate" : "2017-11-08T09:43:43Z",
        "temperatureCelsius" : 26,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 320,
        "sunriseDate" : "2017-11-07T22:32:26Z",
        "conditionsDescription" : "Partly Cloudy",
        "pressureMB" : 1014,
        "visibilityKM" : 9,
        "relativeHumidity" : 70,
        "windSpeedKPH" : 11,
        "weatherCode" : "fair",
        "windChillCelsius" : 26
      },
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "888C8819268B478692284AF9CEE6B6AD",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "748D70DCD7AA48F9BEC09938929C02DE",
          "height" : 2048,
          "md5" : "248b2b24b25a2ffecd7e15f93b2af53a",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13651275634766,
            "latitude" : 22.283050537109375
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13651275634766,
        "administrativeArea" : "香港",
        "placeName" : "The University of Hong Kong",
        "latitude" : 22.283050537109375
      },
      "sourceString" : "visit-B358C333-35DA-4332-BD65-6748A38D921B",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 1505
      },
      "text" : "哈皮吃台湾菜的一天\n\n![](dayone-moment:\/\/4C6787C6FFF740479D3FC664B24FB7FE)\n\n心情3.5分。终于约到了一起午餐。\n台湾菜还是有点正宗虽然芋圆很一般。\n下午自习和看学长姐们的专研，上午场很普通下午场开始展现各种高科技。\n有点怀疑自己能不能也那么厉害了。\n晚上上课然后甜品。\n满足的一天。",
      "weather" : {
        "sunsetDate" : "2017-11-09T09:43:17Z",
        "temperatureCelsius" : 27,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 330,
        "sunriseDate" : "2017-11-08T22:33:01Z",
        "conditionsDescription" : "Mostly Sunny",
        "pressureMB" : 1015,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 62,
        "windSpeedKPH" : 7,
        "weatherCode" : "fair",
        "windChillCelsius" : 27
      },
      "creationDate" : "2017-11-09T04:20:37Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "E2655EAEEABF4FA49253BB73816647CB",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "4C6787C6FFF740479D3FC664B24FB7FE",
          "date" : "2017-11-10T05:47:55Z",
          "location" : {
            "region" : {
              "center" : {
                "longitude" : 114.14197540283203,
                "latitude" : 22.285667418704378
              },
              "identifier" : "<+22.28566742,+114.14197540> radius 70.92",
              "radius" : 70.916247912858097
            },
            "localityName" : "香港",
            "country" : "香港",
            "timeZoneName" : "Asia\/Hong_Kong",
            "administrativeArea" : "香港",
            "longitude" : 114.14197540283203,
            "placeName" : "香港第三街56号",
            "latitude" : 22.285667419433594
          },
          "weather" : {
            "sunsetDate" : "2017-11-10T09:42:53Z",
            "temperatureCelsius" : 28,
            "weatherServiceName" : "HAMweather",
            "windBearing" : 290,
            "sunriseDate" : "2017-11-09T22:33:37Z",
            "conditionsDescription" : "Mostly Sunny",
            "pressureMB" : 1013,
            "visibilityKM" : 5,
            "relativeHumidity" : 66,
            "windSpeedKPH" : 13,
            "weatherCode" : "fair",
            "windChillCelsius" : 28
          },
          "height" : 2048,
          "md5" : "b3900fd9a1dd0f6a1fccd673f98de1df",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13379669189453,
            "latitude" : 22.283878326416016
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13379669189453,
        "administrativeArea" : "香港",
        "placeName" : "The University of Hong Kong",
        "latitude" : 22.283878326416016
      },
      "sourceString" : "visit-5E1B0AAA-DA7A-4A9E-9BF9-D62F3A668DFE",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 5713
      },
      "text" : "预祝双十一大剁手的一天\n\n![](dayone-moment:\/\/7A451953A7AB4BB8B557196E922FB170)\n\n心情3.5分。压力很大要买买买才可以快乐一点！\nsuperdry的衣服仿佛让我打开了新世界大门。除了aape的浪骚果然还有一个内敛又奔放的牌子。外加店员小姐姐很会聊天。\n晚上回来自习和健身。\nsuperdry的外套真的很好看啊。果然身在香港，过什么双十一。",
      "weather" : {
        "sunsetDate" : "2017-11-10T09:42:53Z",
        "temperatureCelsius" : 28,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 0,
        "sunriseDate" : "2017-11-09T22:33:37Z",
        "conditionsDescription" : "Mostly Clear",
        "pressureMB" : 1013,
        "visibilityKM" : 6,
        "relativeHumidity" : 66,
        "windSpeedKPH" : 4,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 28
      },
      "creationDate" : "2017-11-10T11:00:20Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "AF5468BA6BDA458CB9BFE631FDF5B955",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "7A451953A7AB4BB8B557196E922FB170",
          "date" : "2017-11-11T04:20:37Z",
          "location" : {
            "region" : {
              "center" : {
                "longitude" : 114.13651275634771,
                "latitude" : 22.28305053419291
              },
              "identifier" : "<+22.28305053,+114.13651276> radius 141.83",
              "radius" : 141.83262351465436
            },
            "localityName" : "香港",
            "country" : "香港",
            "timeZoneName" : "Asia\/Hong_Kong",
            "administrativeArea" : "香港",
            "longitude" : 114.13651275634766,
            "placeName" : "The University of Hong Kong",
            "latitude" : 22.283050537109375
          },
          "weather" : {
            "sunsetDate" : "2017-11-11T09:42:30Z",
            "temperatureCelsius" : 29,
            "weatherServiceName" : "HAMweather",
            "windBearing" : 90,
            "sunriseDate" : "2017-11-10T22:34:13Z",
            "conditionsDescription" : "Mostly Sunny",
            "pressureMB" : 1013,
            "visibilityKM" : 48.280319213867188,
            "relativeHumidity" : 58,
            "windSpeedKPH" : 19,
            "weatherCode" : "fair",
            "windChillCelsius" : 29
          },
          "height" : 2048,
          "md5" : "63ff3840510a70ca97a667fde4cf9101",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13752746582031,
            "latitude" : 22.285306930541992
          },
          "radius" : 75
        },
        "localityName" : "Hong Kong",
        "country" : "Hong Kong",
        "longitude" : 114.13752746582031,
        "administrativeArea" : "Hong Kong",
        "placeName" : "179 Third Street, Hong Kong",
        "latitude" : 22.285306930541992
      },
      "creationDate" : "2017-11-11T04:11:32Z",
      "userActivity" : {
        "activityName" : "Walking",
        "stepCount" : 985
      },
      "text" : "双十一剪头发订机票的一天\n\n![](dayone-moment:\/\/5D099A56D2144331A5EC40D7DFEE9D8B)\n\n心情3分。很难得可以在，应该剪头发的第一天就去剪头发了。\n下午自习本来觉得起床挺早的结果，定了一个下午的印尼泰国机票弄完就六点了。\n不过解决完一件事情也好阿。\n虽然现在的自己只想静静呆着不是很想去玩了。\n说来最近自己的变化真是超乎寻常的快。\n晚上健身和打乒乓，回来吃了牛肉面夜宵！",
      "weather" : {
        "sunsetDate" : "2017-11-11T09:42:30Z",
        "temperatureCelsius" : 29,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 90,
        "sunriseDate" : "2017-11-10T22:34:13Z",
        "conditionsDescription" : "Mostly Sunny",
        "pressureMB" : 1013,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 58,
        "windSpeedKPH" : 19,
        "weatherCode" : "fair",
        "windChillCelsius" : 29
      },
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "BC5E2F91EEC34C0D8DD5A04792C31F58",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "5D099A56D2144331A5EC40D7DFEE9D8B",
          "height" : 2048,
          "md5" : "49bcb32d1ec00af92117b30f9385080d",
          "focalLength" : "(null)"
        }
      ]
    }
  ]};


let structured = dayOne.entries.map(i => {
  return {
    img_url: 'http://owdi2r4ca.bkt.clouddn.com/' + i.photos[0].md5 + '.jpeg?imageView2/2/w/400/h/400/interlace/1/q/100',
    title: i.text.substr(0, i.text.indexOf('![]')),
    content: i.text.substr(i.text.lastIndexOf(')\n\n') + 2, i.text.indexOf('////') != -1 ? i.text.indexOf('////') - i.text.lastIndexOf(')\n\n') - 2 : undefined),
    date: i.creationDate,
    id: i.uuid,
    place: i.location && i.location.placeName
  }
});
console.log(structured)
