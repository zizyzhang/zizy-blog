/**
 * Created by Zizy on 17/09/2017.
 */


let dayOne ={
  "metadata" : {
    "version" : "1.0"
  },
  "entries" : [
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13452911376953,
            "latitude" : 22.283302307128906
          },
          "radius" : 75
        },
        "localityName" : "Hong Kong",
        "country" : "Hong Kong",
        "longitude" : 114.13452911376953,
        "administrativeArea" : "Hong Kong",
        "placeName" : "The University of Hong Kong",
        "latitude" : 22.283302307128906
      },
      "sourceString" : "visit-EAC31929-B240-4350-BCC1-9164E267F944",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 7719
      },
      "text" : "离别日和cpp速成的一天\n\n![](dayone-moment:\/\/794D094E4DD843C88A5F4634F33CF860)\n\n心情3.5分。早上赶飞机到喷血，丢了第二张八达通……\n中午便当午餐好久没有健身觉得有点累。\n然后学习了一下午的cpp，一直到晚上港铁关门，爬山回家。",
      "weather" : {
        "sunsetDate" : "2017-11-28T09:39:21Z",
        "temperatureCelsius" : 25,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 330,
        "sunriseDate" : "2017-11-27T22:45:14Z",
        "conditionsDescription" : "Mostly Sunny",
        "pressureMB" : 1015,
        "visibilityKM" : 5,
        "relativeHumidity" : 61,
        "windSpeedKPH" : 13,
        "weatherCode" : "fair",
        "windChillCelsius" : 25
      },
      "creationDate" : "2017-11-28T06:38:36Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "AFEBF558B7E648E8A3F8183FD8CE87A4",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "794D094E4DD843C88A5F4634F33CF860",
          "height" : 2048,
          "md5" : "a2d8717688d53ed3a6c851e54e27cd13",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13455200195312,
            "latitude" : 22.283294677734375
          },
          "radius" : 75
        },
        "localityName" : "Hong Kong",
        "country" : "Hong Kong",
        "longitude" : 114.13455200195312,
        "administrativeArea" : "Hong Kong",
        "placeName" : "The University of Hong Kong",
        "latitude" : 22.283294677734375
      },
      "sourceString" : "visit-B3EE9B6F-7417-455B-B42F-963A5E2DD9E2",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 3251
      },
      "text" : "赶uml作业的一天\n\n![](dayone-moment:\/\/1534D0A424B44B7DA987C36D3207D191)\n\n心情3.5分。写着uml才觉得自己原来可能对uml的理解还不够多。\n终于还是做完了作业。\n开心。",
      "weather" : {
        "sunsetDate" : "2017-11-29T09:39:23Z",
        "temperatureCelsius" : 27,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 60,
        "sunriseDate" : "2017-11-28T22:45:54Z",
        "conditionsDescription" : "Partly Cloudy",
        "pressureMB" : 1014,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 62,
        "windSpeedKPH" : 13,
        "weatherCode" : "fair",
        "windChillCelsius" : 27
      },
      "creationDate" : "2017-11-29T06:38:25Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "5B2A262267264F0BA1DB30614EE2B11D",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "1534D0A424B44B7DA987C36D3207D191",
          "height" : 2048,
          "md5" : "5518940e2fae55ab7a8394e705b88d27",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.14203643798828,
            "latitude" : 22.285646438598633
          },
          "radius" : 75
        },
        "localityName" : "Hong Kong",
        "country" : "Hong Kong",
        "longitude" : 114.14203643798828,
        "administrativeArea" : "Hong Kong",
        "placeName" : "56 Third Street, Hong Kong",
        "latitude" : 22.285646438598633
      },
      "sourceString" : "visit-B629CF90-38C8-4F70-89DD-76E39A11611B",
      "userActivity" : {
        "activityName" : "Stationary"
      },
      "text" : "作业没什么进展的一天\n\n![](dayone-moment:\/\/7826A09BF0E74AAF8826195E02417401)\n\n心情3分。中午noodies不太开心。\n下午学习帮助同学debug。\n晚餐猪颈肉好吃但是好少。\n夜宵甜品。\n仿佛突然理解为什么那么多人喜欢喝酒了。\n\/\/\/\/就好像自己也没有很爱吃甜品。",
      "weather" : {
        "sunsetDate" : "2017-11-30T09:39:26Z",
        "temperatureCelsius" : 24,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 120,
        "sunriseDate" : "2017-11-29T22:46:34Z",
        "conditionsDescription" : "Mostly Clear",
        "pressureMB" : 1016,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 78,
        "windSpeedKPH" : 19,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 24
      },
      "creationDate" : "2017-11-29T16:55:43Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "7FDBA887867C481BBCE97A8FA2673E5B",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "7826A09BF0E74AAF8826195E02417401",
          "date" : "2017-11-30T16:55:43Z",
          "location" : {
            "region" : {
              "center" : {
                "longitude" : 114.14203643798825,
                "latitude" : 22.285646437869431
              },
              "identifier" : "<+22.28564644,+114.14203644> radius 70.92",
              "radius" : 70.916247972609796
            },
            "localityName" : "Hong Kong",
            "country" : "Hong Kong",
            "timeZoneName" : "Asia\/Hong_Kong",
            "administrativeArea" : "Hong Kong",
            "longitude" : 114.14203643798828,
            "placeName" : "56 Third Street, Hong Kong",
            "latitude" : 22.285646438598633
          },
          "weather" : {
            "sunsetDate" : "2017-12-01T09:39:30Z",
            "temperatureCelsius" : 23,
            "weatherServiceName" : "HAMweather",
            "windBearing" : 40,
            "sunriseDate" : "2017-11-30T22:47:14Z",
            "conditionsDescription" : "Partly Cloudy",
            "pressureMB" : 1018,
            "visibilityKM" : 48.280319213867188,
            "relativeHumidity" : 69,
            "windSpeedKPH" : 17,
            "weatherCode" : "cloudy-night",
            "windChillCelsius" : 23
          },
          "height" : 2048,
          "md5" : "ae6976f8aaf7fd8142d5a3a206558daa",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13716888427734,
            "latitude" : 22.287029266357422
          },
          "radius" : 75
        },
        "localityName" : "Hong Kong",
        "country" : "Hong Kong",
        "longitude" : 114.13716888427734,
        "administrativeArea" : "Hong Kong",
        "placeName" : "345 Des Voeux Road West, Hong Kong",
        "latitude" : 22.287029266357422
      },
      "sourceString" : "visit-B87E6C08-DB4F-4EE9-9109-6CDD83C4DA52",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 1343
      },
      "text" : "通宵写作业起床头痛的一天\n\n![](dayone-moment:\/\/14E4A8D569CF45289CE2079FE96BC4AC)\n\n心情3.5分。昨夜不小心差点做作业通宵。\n起来吃点心，玉米真的非常好吃啊，然后去打卡dental。\n没有吃晚饭吃了很麻的夜宵。",
      "weather" : {
        "sunsetDate" : "2017-12-01T09:39:30Z",
        "temperatureCelsius" : 22,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 40,
        "sunriseDate" : "2017-11-30T22:47:14Z",
        "conditionsDescription" : "Partly Cloudy",
        "pressureMB" : 1019,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 61,
        "windSpeedKPH" : 19,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 22
      },
      "creationDate" : "2017-12-01T11:37:10Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "0F46D0AB69C143DFB10BB77E5E5FCDAF",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "14E4A8D569CF45289CE2079FE96BC4AC",
          "date" : "2017-12-03T11:37:10Z",
          "location" : {
            "region" : {
              "center" : {
                "longitude" : 114.13716888427734,
                "latitude" : 22.287029263440409
              },
              "identifier" : "<+22.28702926,+114.13716888> radius 141.83",
              "radius" : 141.83260051059443
            },
            "localityName" : "Hong Kong",
            "country" : "Hong Kong",
            "timeZoneName" : "Asia\/Hong_Kong",
            "administrativeArea" : "Hong Kong",
            "longitude" : 114.13716888427734,
            "placeName" : "345 Des Voeux Road West, Hong Kong",
            "latitude" : 22.287029266357422
          },
          "weather" : {
            "sunsetDate" : "2017-12-03T09:39:43Z",
            "temperatureCelsius" : 22,
            "weatherServiceName" : "HAMweather",
            "windBearing" : 0,
            "sunriseDate" : "2017-12-02T22:48:34Z",
            "conditionsDescription" : "Mostly Clear",
            "pressureMB" : 1017,
            "visibilityKM" : 9,
            "relativeHumidity" : 65,
            "windSpeedKPH" : 4,
            "weatherCode" : "cloudy-night",
            "windChillCelsius" : 22
          },
          "height" : 2048,
          "md5" : "8a48cfbed1aa021f5d2e32edc70fc47f",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13417053222656,
            "latitude" : 22.283405303955078
          },
          "radius" : 75
        },
        "localityName" : "Hong Kong",
        "country" : "Hong Kong",
        "longitude" : 114.13417053222656,
        "administrativeArea" : "Hong Kong",
        "placeName" : "The University of Hong Kong",
        "latitude" : 22.283405303955078
      },
      "sourceString" : "visit-92BAE900-35B6-44FE-B50B-03DB234D5ABF",
      "userActivity" : {
        "activityName" : "Walking",
        "stepCount" : 4653
      },
      "text" : "终于做好了图片压缩开心到炸裂的一天\n\n![](dayone-moment:\/\/0F554FC73A4B492D897D010786505F37)\n\n心情4.5分。中午吃了素食，下午拿到了新的柜子和衣架晚上拿了新裤子！\n晚饭吃得很随便为了酝酿后来终于写出multimedia作业的快乐。\n很多天的通宵似乎没有白费。\n夜宵牛肉球和排骨都很好吃！",
      "weather" : {
        "sunsetDate" : "2017-12-02T09:39:36Z",
        "temperatureCelsius" : 21,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 50,
        "sunriseDate" : "2017-12-01T22:47:54Z",
        "conditionsDescription" : "Mostly Clear",
        "pressureMB" : 1018,
        "visibilityKM" : 11.265407562255859,
        "relativeHumidity" : 64,
        "windSpeedKPH" : 9,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 21
      },
      "creationDate" : "2017-12-02T11:43:01Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "AEF9773964974141819AEE851864A5FC",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "0F554FC73A4B492D897D010786505F37",
          "height" : 2048,
          "md5" : "2fa6d8c75ae568d399d613b4ed930562",
          "focalLength" : "(null)"
        }
      ]
    }
  ]};


let structured = dayOne.entries.map(i => {
  return {
    img_url: 'http://owdi2r4ca.bkt.clouddn.com/' + i.photos[0].md5 + '.jpeg?imageView2/2/w/400/h/400/interlace/1/q/100',
    title: i.text.substr(0, i.text.indexOf('![]')),
    content: i.text.substr(i.text.lastIndexOf(')\n\n') + 2, i.text.indexOf('////') != -1 ? i.text.indexOf('////') - i.text.lastIndexOf(')\n\n') - 2 : undefined),
    date: i.creationDate,
    id: i.uuid,
    place: i.location && i.location.placeName
  }
});
console.log(structured)
