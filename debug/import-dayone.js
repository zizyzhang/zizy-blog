/**
 * Created by Zizy on 17/09/2017.
 */
let dayOne = {
  "metadata" : {
    "version" : "1.0"
  },
  "entries" : [
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13615417480469,
            "latitude" : 22.28577995300293
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13615417480469,
        "administrativeArea" : "香港",
        "placeName" : "香港皇后大道西470号",
        "latitude" : 22.28577995300293
      },
      "sourceString" : "visit-34757A10-36D3-4593-9CE7-52E1BD296477",
      "userActivity" : {
        "activityName" : "Stationary"
      },
      "text" : "上课巨无聊怀疑自己进了假学校的一天\n\n![](dayone-moment:\/\/191BF82DBB1A4126918B2D595A9CBD03)\n\n都是一些学过的东西反正感觉听不听课也都无所谓。\n不好吃的草莓。\n开心的事情是吃了关爱**儿童的爱心便当。\n晚上在自学，但是没有什么心情静下来好好看书。还是打游戏好了😫。\n\/\/\/\/分手第一天，反正…虽然不知道自己做的是对是错。可能就是彻彻底底错的吧？？？可是又怎么样啊？？错都错了。将错就错。只是不知道有什么办法可以更开心一点。按理来说，应该去要更开心的吧？？",
      "weather" : {
        "sunsetDate" : "2017-09-20T10:22:59Z",
        "temperatureCelsius" : 29,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 100,
        "sunriseDate" : "2017-09-19T22:12:29Z",
        "conditionsDescription" : "Mostly Clear",
        "pressureMB" : 1010,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 70,
        "windSpeedKPH" : 11,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 29
      },
      "creationDate" : "2017-09-19T16:09:18Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "B5599B5B0C894630AF1E5F45318CDC09",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "191BF82DBB1A4126918B2D595A9CBD03",
          "height" : 2048,
          "md5" : "3a00bc9b70f528e2ebc07e269e015eed",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13616180419922,
            "latitude" : 22.285770416259766
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13616180419922,
        "administrativeArea" : "香港",
        "placeName" : "香港皇后大道西470号",
        "latitude" : 22.285770416259766
      },
      "sourceString" : "visit-0FF8735C-9E14-4A6A-9F8D-057B4B0BD945",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 1
      },
      "text" : "和爬山认识的新同学吃饭学习的一天\n\n![](dayone-moment:\/\/C9BC58E015264A07A2A6506BDD09411A)\n\n虽然开始的时候还是很尴尬：）\n外加似乎南北的口味不太一样啊？？？\n不过还好只有普通尴尬程度而已。\n看神经网络的第二课学的有点抑郁\n看不下去书的感觉。\n可能还是觉得太抽象吧？？？\n晚餐的su餐厅非常好评。\n还是开心的一天阿。",
      "weather" : {
        "sunsetDate" : "2017-09-21T10:21:59Z",
        "temperatureCelsius" : 29,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 110,
        "sunriseDate" : "2017-09-20T22:12:46Z",
        "conditionsDescription" : "Mostly Clear",
        "pressureMB" : 1009,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 79,
        "windSpeedKPH" : 22,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 29
      },
      "creationDate" : "2017-09-20T16:11:26Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "10E83A023AB1416BA983E4E0EF185BD2",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "C9BC58E015264A07A2A6506BDD09411A",
          "height" : 2048,
          "md5" : "f339c312aa8e7766dfbcba6f9ed9a2bd",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13616180419922,
            "latitude" : 22.2857666015625
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13616180419922,
        "administrativeArea" : "香港",
        "placeName" : "香港皇后大道西470号",
        "latitude" : 22.2857666015625
      },
      "sourceString" : "visit-A845DB5F-6186-4F7C-A008-20F7622559AC",
      "userActivity" : {
        "activityName" : "Stationary"
      },
      "text" : "深圳公司审查外加海底捞的一天！\n\n![](dayone-moment:\/\/92C58B8918FB4D8B84997058E3D1C783)\n\n实际上是两个智障先记错了地铁站然后走错口岸外加走错地铁站n次的一天哈哈哈哈哈。至少公司一切顺利，外加海底捞还是很棒的啊。逛超市日常没耐心。不知道有什么那么好逛：）。还是买了一些有的没的。喝了奇怪的皇茶，并没有心心念念的火龙果。但觉得还是很长很开心的一天。",
      "weather" : {
        "sunsetDate" : "2017-09-22T10:21:00Z",
        "temperatureCelsius" : 29,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 90,
        "sunriseDate" : "2017-09-21T22:13:03Z",
        "conditionsDescription" : "Mostly Clear",
        "pressureMB" : 1009,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 74,
        "windSpeedKPH" : 9,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 29
      },
      "creationDate" : "2017-09-21T16:18:41Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "B3DB542F504C43D38A5E30FDE0401CA2",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "92C58B8918FB4D8B84997058E3D1C783",
          "height" : 2048,
          "md5" : "c88d121671a2565c27d4e7f50cf55413",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13631439208984,
            "latitude" : 22.285749435424805
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13631439208984,
        "administrativeArea" : "香港",
        "placeName" : "香港皇后大道西470号",
        "latitude" : 22.285749435424805
      },
      "sourceString" : "visit-5961EBF7-C51A-415D-99BE-A7D27259B92D",
      "userActivity" : {
        "activityName" : "Stationary"
      },
      "text" : "和房东谈完后开始颓废各种找吃的一天\n\n![](dayone-moment:\/\/9912837CD9B04F26932E28430AE99ACB)\n\n可能不好的情绪在一个人的时候才会累积起来。\n虽然可能之后还是要搬家，不过把这一切都当作并非应得的话。可能也没有那么难过了。\n总算找个一个可能还不错的新家，希望一切都好。\n吃东西实在是一个很容易让人冷加下来的事情阿？",
      "weather" : {
        "sunsetDate" : "2017-09-23T10:20:00Z",
        "temperatureCelsius" : 30,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 110,
        "sunriseDate" : "2017-09-22T22:13:20Z",
        "conditionsDescription" : "Partly Cloudy",
        "pressureMB" : 1010,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 79,
        "windSpeedKPH" : 15,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 30
      },
      "creationDate" : "2017-09-22T16:34:48Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "7916C2CD8C6848B2B6FA96F2DE949615",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "9912837CD9B04F26932E28430AE99ACB",
          "height" : 2048,
          "md5" : "fa8d633bee57409c41bdeab75cce179a",
          "focalLength" : "(null)"
        }
      ]
    }
  ]};


let structured = dayOne.entries.map(i => {
  return {
    img_url: 'http://owdi2r4ca.bkt.clouddn.com/' + i.photos[0].md5 + '.jpeg?imageView2/2/w/400/h/400/interlace/1/q/100',
    title: i.text.substr(0, i.text.indexOf('![]')),
    content: i.text.substr(i.text.lastIndexOf(')\n\n') + 2, i.text.indexOf('////') != -1? i.text.indexOf('////') - i.text.lastIndexOf(')\n\n') - 2 : undefined),
    date: i.creationDate,
    id: i.uuid,
    place: i.location && i.location.placeName
  }
});
console.log(structured)
