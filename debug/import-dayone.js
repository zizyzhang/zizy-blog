/**
 * Created by Zizy on 17/09/2017.
 */


let dayOne ={
  "metadata" : {
    "version" : "1.0"
  },
  "entries" : [
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13420104980469,
            "latitude" : 22.283393859863281
          },
          "radius" : 75
        },
        "localityName" : "Hong Kong",
        "country" : "Hong Kong",
        "longitude" : 114.13420104980469,
        "administrativeArea" : "Hong Kong",
        "placeName" : "The University of Hong Kong",
        "latitude" : 22.283393859863281
      },
      "sourceString" : "visit-567DA3E3-657C-48BC-A08E-BEED0151BDE9",
      "userActivity" : {
        "activityName" : "Stationary"
      },
      "text" : "记错日期低效学习的一天\n\n![](dayone-moment:\/\/2F15AC794AEC474F89467318A683E6C6)\n\n心情3分。出门的时候才发现不是星期一。\n开始学习的时候都快四点啦。\n然后看看coursera聊聊天真是没做什么事情。\n希望以后可以做越来越多事情。\n贴吧似乎没什么效果。",
      "weather" : {
        "sunsetDate" : "2017-11-12T09:42:08Z",
        "temperatureCelsius" : 22,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 120,
        "sunriseDate" : "2017-11-11T22:34:50Z",
        "conditionsDescription" : "Rain",
        "pressureMB" : 1013,
        "visibilityKM" : 2.7999999523162842,
        "relativeHumidity" : 94,
        "windSpeedKPH" : 15,
        "weatherCode" : "rain",
        "windChillCelsius" : 22
      },
      "creationDate" : "2017-11-12T04:37:39Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "A4DABD0F628B4EF7A7F9DE70E119E9F8",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "2F15AC794AEC474F89467318A683E6C6",
          "height" : 2048,
          "md5" : "0a0779b19ed597a76d27175aabf14d39",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.09992980957031,
            "latitude" : 22.547536849975586
          },
          "radius" : 75
        },
        "localityName" : "Shenzhen",
        "country" : "China",
        "longitude" : 114.09992980957031,
        "administrativeArea" : "Guangdong",
        "placeName" : "No.1008-2 Hongling Middle Road",
        "latitude" : 22.547536849975586
      },
      "sourceString" : "visit-C5A21F61-B1CA-4ACA-8770-ED5AF52F7951",
      "userActivity" : {
        "activityName" : "Stationary"
      },
      "text" : "来深圳吃喝的一天\n\n![](dayone-moment:\/\/8420C65ADB6F48A5BEEE36E8A2A79747)\n\n心情3.5分。早上买了便当去学校吃，很便宜但是质量普通。买了新的雨伞和充电宝。\n下午开完会晚上去深圳。\n一切顺利，每天一张新衣服自拍！",
      "weather" : {
        "sunsetDate" : "2017-11-13T09:41:47Z",
        "temperatureCelsius" : 24,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 80,
        "sunriseDate" : "2017-11-12T22:35:27Z",
        "conditionsDescription" : "Light Rain",
        "pressureMB" : 1014,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 74,
        "windSpeedKPH" : 17,
        "weatherCode" : "rain",
        "windChillCelsius" : 24
      },
      "creationDate" : "2017-11-13T02:19:55Z",
      "timeZone" : "Asia\/Shanghai",
      "uuid" : "C67B5F28DD6448AFBBD19D806433DC55",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "8420C65ADB6F48A5BEEE36E8A2A79747",
          "height" : 2048,
          "md5" : "c752133afe46cb7ad96d37c370d44733",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13375091552734,
            "latitude" : 22.283615112304688
          },
          "radius" : 75
        },
        "localityName" : "Hong Kong",
        "country" : "Hong Kong",
        "longitude" : 114.13375091552734,
        "administrativeArea" : "Hong Kong",
        "placeName" : "The University of Hong Kong",
        "latitude" : 22.283615112304688
      },
      "sourceString" : "visit-15606F98-44F8-4C14-9389-16164D3631BD",
      "userActivity" : {
        "activityName" : "Stationary"
      },
      "text" : "深圳终于开好户的一天\n\n![](dayone-moment:\/\/0E61FC05381D46B4A10C70279B4C9A9C)\n\n心情3分。昨晚没怎么睡觉早上八点多起床，还好一切顺利的办好了。\n深圳街道宽阔的样子让人觉得香港比起来真是压抑的透不过气。中午吃了豪华自助感觉菜的水准和服务都很高。\n下午凑了一下sogo的热闹。感觉人太多没有逛街的幸福感。\n晚上上课一度心情炸裂低。不知道老师在说什么……\n\/\/\/\/晚上和小姐姐吃了甜点，开始很开心的！一种很奇怪的想疏远但是还是觉得在一起呆的很舒服的感觉。还是顺其自然好了！",
      "weather" : {
        "sunsetDate" : "2017-11-14T09:41:28Z",
        "temperatureCelsius" : 25,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 110,
        "sunriseDate" : "2017-11-13T22:36:04Z",
        "conditionsDescription" : "Partly Cloudy",
        "pressureMB" : 1014,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 74,
        "windSpeedKPH" : 20,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 25
      },
      "creationDate" : "2017-11-14T10:55:00Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "F26696E5A8314490BAB01740E829EF08",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "0E61FC05381D46B4A10C70279B4C9A9C",
          "height" : 2048,
          "md5" : "4b62d50779725b6adf4c5f4c3af7cf24",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13465118408203,
            "latitude" : 22.283332824707031
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13465118408203,
        "administrativeArea" : "香港",
        "placeName" : "The University of Hong Kong",
        "latitude" : 22.283332824707031
      },
      "sourceString" : "visit-15606F98-44F8-4C14-9389-16164D3631BD",
      "userActivity" : {
        "activityName" : "Stationary"
      },
      "text" : "长长的上课的一天\n\n![](dayone-moment:\/\/C1352D55252A40E7AD2D8B36D0753FCD)\n\n心情3.5分。早上还是中午打开了新的家门口餐厅。\n口感普通，下午app课在刷题，workshop并没有教到ios，晚上一起吃饭看了一下电影然后uml对答案。\n\/\/\/\/一去学校就可以和小姐姐一天在一起的感觉还是很开心的。莫名的开心",
      "weather" : {
        "sunsetDate" : "2017-11-15T09:41:09Z",
        "temperatureCelsius" : 25,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 110,
        "sunriseDate" : "2017-11-14T22:36:42Z",
        "conditionsDescription" : "Mostly Sunny",
        "pressureMB" : 1014,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 74,
        "windSpeedKPH" : 19,
        "weatherCode" : "fair",
        "windChillCelsius" : 25
      },
      "creationDate" : "2017-11-15T08:40:43Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "C65431B82FD1457FADD5935F4B5AB903",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "C1352D55252A40E7AD2D8B36D0753FCD",
          "height" : 2048,
          "md5" : "ddd08357435954a8eaea897eaad800cd",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13773345947266,
            "latitude" : 22.285409927368164
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13773345947266,
        "administrativeArea" : "香港",
        "placeName" : "香港薄扶林道67号",
        "latitude" : 22.285409927368164
      },
      "creationDate" : "2017-11-16T08:27:33Z",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 3385
      },
      "text" : "中午没吃饱晚上吃宵夜的一天\n\n![](dayone-moment:\/\/93694C313EA94E34AF497FA489177749)\n\n心情3.5分。中午打卡了零食小吃结果导致下午健身没什么状态。\n可能昨晚没睡好下午一直困。\n7-11居然就一直不再给咖啡补货了？？？\n不太开心了。\n晚上日常打卡甜品店，回家十二点多阿！！",
      "weather" : {
        "sunsetDate" : "2017-11-16T09:40:53Z",
        "temperatureCelsius" : 26,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 110,
        "sunriseDate" : "2017-11-15T22:37:20Z",
        "conditionsDescription" : "Mostly Sunny",
        "pressureMB" : 1013,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 65,
        "windSpeedKPH" : 19,
        "weatherCode" : "fair",
        "windChillCelsius" : 26
      },
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "3D215D5ED1B94E228D4A9161AE08AE5C",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "93694C313EA94E34AF497FA489177749",
          "height" : 2048,
          "md5" : "e2594ca8ace7fda9ffbe4ad674bc6bf2",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13557434082031,
            "latitude" : 22.287017822265625
          },
          "radius" : 75
        },
        "localityName" : "Hong Kong",
        "country" : "Hong Kong",
        "longitude" : 114.13557434082031,
        "administrativeArea" : "Hong Kong",
        "placeName" : "188 Connaught Road West, Hong Kong",
        "latitude" : 22.287017822265625
      },
      "creationDate" : "2017-11-17T08:27:58Z",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 2274
      },
      "text" : "学习和搬运打印机的一天\n\n![](dayone-moment:\/\/76777814A80A4425B4EB726E4EE7E587)\n\n心情3.5分。最近起床越来越晚，\n吃了吉野家然后咖啡厅。\n下午去九龙湾搬运打印机。\n晚上学习和健身。\n\/\/\/\/感觉和小姐姐的感情up。然后就又没有什么然后了。",
      "weather" : {
        "sunsetDate" : "2017-11-17T09:40:38Z",
        "temperatureCelsius" : 28,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 280,
        "sunriseDate" : "2017-11-16T22:37:58Z",
        "conditionsDescription" : "Mostly Sunny",
        "pressureMB" : 1008,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 70,
        "windSpeedKPH" : 9,
        "weatherCode" : "fair",
        "windChillCelsius" : 28
      },
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "37306EE846154115A2AEC451B04A2DBB",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "76777814A80A4425B4EB726E4EE7E587",
          "date" : "2017-11-18T16:39:27Z",
          "location" : {
            "region" : {
              "center" : {
                "longitude" : 114.13666534423831,
                "latitude" : 22.286933896008762
              },
              "identifier" : "<+22.28693390,+114.13666534> radius 141.83",
              "radius" : 141.83260106192969
            },
            "localityName" : "Hong Kong",
            "country" : "Hong Kong",
            "timeZoneName" : "Asia\/Hong_Kong",
            "administrativeArea" : "Hong Kong",
            "longitude" : 114.13666534423828,
            "placeName" : "347–351 Des Voeux Road West, Hong Kong",
            "latitude" : 22.286933898925781
          },
          "weather" : {
            "sunsetDate" : "2017-11-19T09:40:11Z",
            "temperatureCelsius" : 20,
            "weatherServiceName" : "HAMweather",
            "windBearing" : 50,
            "sunriseDate" : "2017-11-18T22:39:16Z",
            "conditionsDescription" : "Light Rain",
            "pressureMB" : 1017,
            "visibilityKM" : 9,
            "relativeHumidity" : 88,
            "windSpeedKPH" : 22,
            "weatherCode" : "rain-night",
            "windChillCelsius" : 20
          },
          "height" : 2048,
          "md5" : "ebab1b123c115e7a8501339155537195",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13539123535156,
            "latitude" : 22.286849975585938
          },
          "radius" : 75
        },
        "localityName" : "Hong Kong",
        "country" : "Hong Kong",
        "longitude" : 114.13539123535156,
        "administrativeArea" : "Hong Kong",
        "placeName" : "430 Des Voeux Road West, Hong Kong",
        "latitude" : 22.286849975585938
      },
      "sourceString" : "visit-8BB3D776-446D-4AF7-B29C-047D38F52D2A",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 2883
      },
      "text" : "学习和莫名被搬了一个柜子的一天\n\n![](dayone-moment:\/\/692708829C0141D6995B836D37346A16)\n\n心情2.5分。觉得自己慢慢进入颓废状态。\n吃完午饭之后下午在看些有的没的，很困很没效率啊。\n晚上搬柜子，搬好之后似乎不太是自己想象的……略悲伤，希望之后柜子到了可以改善一些。",
      "weather" : {
        "sunsetDate" : "2017-11-19T09:40:11Z",
        "temperatureCelsius" : 20,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 70,
        "sunriseDate" : "2017-11-18T22:39:16Z",
        "conditionsDescription" : "Partly Cloudy",
        "pressureMB" : 1016,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 78,
        "windSpeedKPH" : 11,
        "weatherCode" : "fair",
        "windChillCelsius" : 20
      },
      "creationDate" : "2017-11-18T08:32:29Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "207F1775A4664B7F980608F51D313606",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "692708829C0141D6995B836D37346A16",
          "height" : 2048,
          "md5" : "360a8b53aea4ce71daccb83cbff3b63f",
          "focalLength" : "(null)"
        }
      ]
    }
  ]};


let structured = dayOne.entries.map(i => {
  return {
    img_url: 'http://owdi2r4ca.bkt.clouddn.com/' + i.photos[0].md5 + '.jpeg?imageView2/2/w/400/h/400/interlace/1/q/100',
    title: i.text.substr(0, i.text.indexOf('![]')),
    content: i.text.substr(i.text.lastIndexOf(')\n\n') + 2, i.text.indexOf('////') != -1 ? i.text.indexOf('////') - i.text.lastIndexOf(')\n\n') - 2 : undefined),
    date: i.creationDate,
    id: i.uuid,
    place: i.location && i.location.placeName
  }
});
console.log(structured)
