/**
 * Created by Zizy on 17/09/2017.
 */


let dayOne ={
  "metadata" : {
    "version" : "1.0"
  },
  "entries" : [
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13550567626953,
            "latitude" : 22.285985946655273
          },
          "radius" : 75
        },
        "localityName" : "Hong Kong",
        "country" : "Hong Kong",
        "longitude" : 114.13550567626953,
        "administrativeArea" : "Hong Kong",
        "placeName" : "494 Queen's Road West, Hong Kong",
        "latitude" : 22.285985946655273
      },
      "sourceString" : "visit-C4012681-EA54-4F97-8751-97C56FD7132A",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 555
      },
      "text" : "å‘Šåˆ«å¤šäº‹ä¹‹å†¬å¼€å§‹æœ‰å¼€å¿ƒçš„äº‹æƒ…å‘ç”Ÿçš„å››å¤©\n\n![](dayone-moment:\/\/12C7285A51224B59AEA582D824455423)\n\nå¿ƒæƒ…3.5åˆ†ã€‚\nç™¾åº¦çš„æ’åçªç„¶é—´å°±å›æ¥äº†ã€‚\nè™½ç„¶åŠ äº†å…³é”®è¯è¿‡æ»¤å™¨è¥ä¸šé¢ä¸‹é™äº†30%ã€‚å—¯ï¼Œå¥½åƒä¹Ÿç®—æ˜¯ä¸€ä»¶ä¸æ€ä¹ˆå¼€å¿ƒçš„äº‹æƒ…ã€‚ä¸çŸ¥é“ä»¥åä¼šä¸ä¼šæœ‰ä»€ä¹ˆä¸å¥½çš„äº‹æƒ…å‘ç”Ÿï¼Œäººæ•°ä¼šä¸ä¼šç»§ç»­ä¸‹é™ã€‚\nä½†å¦‚æœè¾¾åˆ°æŸä¸ªç¨‹åº¦çš„å¹³è¡¡çš„è¯ï¼Œåº”è¯¥ä¹Ÿä¸è‡³äºæ˜¯ä»€ä¹ˆåäº‹ã€‚\nå‘¨å…­è€ƒäº†aiæœŸä¸­è€ƒï¼Œåœ¨æŸäº›ç‰¹æ®ŠåŸå› ä¸‹å¯èƒ½è€ƒå¾—è¿˜å¯ä»¥ã€‚ç‹è€æ¿ä¹Ÿé€šè¿‡äº†æˆ‘æ”¹äº†åˆæ”¹çš„è®ºæ–‡è®¡åˆ’ã€‚çœ‹èµ·æ¥ä¸€åˆ‡éƒ½å¾ˆæ­£å¸¸å¾ˆå®‰å…¨ã€‚\nä½†æ˜¯å‘¨æ—¥æ™šä¸Šå°±æ¯”è¾ƒç‰¹åˆ«äº†ï¼Œå’Œä¹‹å‰é‚£äº›å¦–è‰³çš„å‡ å¤©éƒ½ä¸ä¸€æ ·â€¦\n\/\/\/\/å’Œå¥³ç¥é€›äº†æµ·è¾¹èŠåˆ°äº†å››ç‚¹ã€‚çœŸæ˜¯ä¸çŸ¥é“æœ‰ä»€ä¹ˆå¥½è¯´çš„ã€‚æ„Ÿè§‰çœŸçš„æ˜¯åªå‰©ä¸‹kissã€‚æˆ‘ä»¬çš„å…³ç³»åˆ°åº•è¿›å±•åˆ°äº†ä»€ä¹ˆæ ·è®©äººåŒªå¤·æ‰€æ€çš„åœ°æ­¥è‡ªå·±ä¹Ÿè¯´ä¸æ¸…ã€‚å¦‚æœè¿™æ ·ä¹Ÿä¸ç®—äº’ç›¸å–œæ¬¢çš„è¯é‚£ä»€ä¹ˆæ˜¯å‘¢â€¦å¸Œæœ›å¥¹å¯ä»¥æ—©ç‚¹åˆ†æ‰‹ğŸ™‚",
      "weather" : {
        "sunsetDate" : "2018-03-04T10:29:13Z",
        "temperatureCelsius" : 26,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 150,
        "sunriseDate" : "2018-03-03T22:42:55Z",
        "conditionsDescription" : "Partly Cloudy",
        "pressureMB" : 1011,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 79,
        "windSpeedKPH" : 19,
        "weatherCode" : "partly-cloudy",
        "windChillCelsius" : 26
      },
      "creationDate" : "2018-03-04T04:28:31Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "D9B845D3D79C4752B9B7D9F26EA4348A",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "12C7285A51224B59AEA582D824455423",
          "date" : "2018-03-05T04:28:31Z",
          "location" : {
            "region" : {
              "center" : {
                "longitude" : 114.13550567626953,
                "latitude" : 22.285985945926043
              },
              "identifier" : "<+22.28598595,+114.13550568> radius 70.92",
              "radius" : 70.916246988569824
            },
            "localityName" : "Hong Kong",
            "country" : "Hong Kong",
            "timeZoneName" : "Asia\/Hong_Kong",
            "administrativeArea" : "Hong Kong",
            "longitude" : 114.13550567626953,
            "placeName" : "494 Queen's Road West, Hong Kong",
            "latitude" : 22.285985946655273
          },
          "weather" : {
            "weatherServiceName" : "Forecast.io",
            "windBearing" : 164,
            "conditionsDescription" : "Partly Cloudy",
            "pressureMB" : 1013.280029296875,
            "visibilityKM" : 10.010000228881836,
            "relativeHumidity" : 73,
            "windSpeedKPH" : 2.6099998950958252,
            "weatherCode" : "partly-cloudy",
            "temperatureCelsius" : 26.520000457763672
          },
          "height" : 2048,
          "md5" : "9064bf827216643657a2947f4f34b5e5",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.1351318359375,
            "latitude" : 22.285820007324219
          },
          "radius" : 75
        },
        "localityName" : "Hong Kong",
        "country" : "Hong Kong",
        "longitude" : 114.1351318359375,
        "administrativeArea" : "Hong Kong",
        "placeName" : "20 Hill Road, Hong Kong",
        "latitude" : 22.285820007324219
      },
      "sourceString" : "visit-820ED833-135A-4548-904D-89450FDC19F1",
      "userActivity" : {
        "activityName" : "Stationary"
      },
      "text" : "è¿˜ç®—å……å®çš„æ”¾å‡ä¸‰å¤©\n\n![](dayone-moment:\/\/35B557B5DD7043F8AAFCC45042BC1036)\n\nå®é™…ä¸Šä¹Ÿæ²¡æœ‰åšä»€ä¹ˆå¤ªå¤šäº‹æƒ…ï¼Œå°±çœ‹ç€æ—¶é—´ä¸€ç‚¹ç‚¹æµå»äº†ã€‚å‘¨ä¸€å› ä¸ºä½œæ¯æ··ä¹±ç¡äº†åŠå¤©ï¼Œå‘¨äºŒè®¤è¯†äº†ä¸€ä¸‹æ–°æœ‹å‹ï¼Œçœ‹äº†ç”µå½±ã€‚å‘¨ä¸‰æ˜¯ethoçš„å’–å•¡å…å†™æ¸¸æˆï¼Œæ™šä¸Šæ•£æ­¥çš„æ—¶å€™é‡è§ä¼ è¯´ä¸­çš„é‡çŒªç¾¤ã€‚",
      "weather" : {
        "temperatureCelsius" : 18,
        "weatherServiceName" : "Forecast.io",
        "windBearing" : 90,
        "sunriseDate" : "1970-01-01T00:00:00Z",
        "conditionsDescription" : "Breezy and Partly Cloudy",
        "pressureMB" : 1017.47998046875,
        "visibilityKM" : 10.010000228881836,
        "relativeHumidity" : 81,
        "windSpeedKPH" : 32.569999694824219,
        "weatherCode" : "wind",
        "sunsetDate" : "1970-01-01T00:00:00Z"
      },
      "creationDate" : "2018-03-06T17:52:16Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "1748D28E21BD43F3A96E958B906D97EF",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "35B557B5DD7043F8AAFCC45042BC1036",
          "date" : "2018-03-07T17:52:16Z",
          "location" : {
            "region" : {
              "center" : {
                "longitude" : 114.13513183593747,
                "latitude" : 22.285820006595003
              },
              "identifier" : "<+22.28582001,+114.13513184> radius 70.92",
              "radius" : 70.916247471476311
            },
            "localityName" : "Hong Kong",
            "country" : "Hong Kong",
            "timeZoneName" : "Asia\/Hong_Kong",
            "administrativeArea" : "Hong Kong",
            "longitude" : 114.1351318359375,
            "placeName" : "20 Hill Road, Hong Kong",
            "latitude" : 22.285820007324219
          },
          "weather" : {
            "weatherServiceName" : "Forecast.io",
            "windBearing" : 356,
            "conditionsDescription" : "Clear",
            "pressureMB" : 1017.3699951171875,
            "visibilityKM" : 3.7000000476837158,
            "relativeHumidity" : 90,
            "windSpeedKPH" : 23.319999694824219,
            "weatherCode" : "clear-night",
            "temperatureCelsius" : 18.069999694824219
          },
          "height" : 2048,
          "md5" : "a7ed86e67955505026a26b82f4690239",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.14292907714844,
            "latitude" : 22.286857604980469
          },
          "radius" : 75
        },
        "localityName" : "Hong Kong",
        "country" : "Hong Kong",
        "longitude" : 114.14292907714844,
        "administrativeArea" : "Hong Kong",
        "placeName" : "260 Queen's Road West, Hong Kong",
        "latitude" : 22.286857604980469
      },
      "sourceString" : "visit-54DE65C5-BC23-4BA6-A53E-70BEDB433CD7",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 1184
      },
      "text" : "å‰©ä¸‹çš„ä¸€åŠå‡æœŸ\n\n![](dayone-moment:\/\/A424DCAED41F47909F7F11A1DE29B0B2)\n\nå¹¿å·äºŒæ—¥æ¸¸ï¼Œå”å”ä¸çº¦æµé‡ä¸€ç›´ä¸‹æ»‘ï¼Œç„¶ååˆ°ä¸€ä¸ªæ…¢æ…¢çœ‹æ·¡éšä»–å»çš„çŠ¶æ€ã€‚\næ”¶å…¥éå¸¸ä¸å¹³è¡¡ï¼Œå¯èƒ½æœ‰ä¸Šå‡ç©ºé—´æˆ–è®¸æ²¡æœ‰ã€‚\nåŠ äº†è¿‡æ»¤å™¨æ„Ÿè§‰ä¸€åˆ‡éƒ½é‡æ–°å¼€å§‹äº†é˜¿ã€‚\nè´´å§æ”¹äº†è§„åˆ™å˜å¾—æ›´éš¾é¡¶å¸–ã€‚\næ„Ÿæƒ…å¾ˆç³Ÿç³•ï¼Œå·¥ä½œå¾ˆç³Ÿç³•ï¼Œå­¦ä¹ ä¹Ÿæœ‰ç‚¹ç³Ÿç³•ã€‚",
      "weather" : {
        "temperatureCelsius" : 20,
        "weatherServiceName" : "Forecast.io",
        "windBearing" : 70,
        "sunriseDate" : "1970-01-01T00:00:00Z",
        "conditionsDescription" : "Clear",
        "pressureMB" : 1020.5499877929688,
        "visibilityKM" : 10.010000228881836,
        "relativeHumidity" : 68,
        "windSpeedKPH" : 16.399999618530273,
        "weatherCode" : "clear",
        "sunsetDate" : "1970-01-01T00:00:00Z"
      },
      "creationDate" : "2018-03-12T01:45:29Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "B2F71AB394374288BB40608D1D65B2EF",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "A424DCAED41F47909F7F11A1DE29B0B2",
          "date" : "2018-03-13T01:45:29Z",
          "location" : {
            "region" : {
              "center" : {
                "longitude" : 114.14292907714844,
                "latitude" : 22.286857604251217
              },
              "identifier" : "<+22.28685760,+114.14292908> radius 70.92",
              "radius" : 70.916244469128387
            },
            "localityName" : "Hong Kong",
            "country" : "Hong Kong",
            "timeZoneName" : "Asia\/Hong_Kong",
            "administrativeArea" : "Hong Kong",
            "longitude" : 114.14292907714844,
            "placeName" : "260 Queen's Road West, Hong Kong",
            "latitude" : 22.286857604980469
          },
          "weather" : {
            "weatherServiceName" : "Forecast.io",
            "windBearing" : 77,
            "conditionsDescription" : "Clear",
            "pressureMB" : 1018.5399780273438,
            "visibilityKM" : 10.010000228881836,
            "relativeHumidity" : 71,
            "windSpeedKPH" : 13.630000114440918,
            "weatherCode" : "clear",
            "temperatureCelsius" : 21.850000381469727
          },
          "height" : 2048,
          "md5" : "4ff7e0c6edc826ab187a145036decf93",
          "focalLength" : "(null)"
        }
      ]
    }
  ]};


let structured = dayOne.entries.map(i => {
  return {
    img_url: 'http://owdi2r4ca.bkt.clouddn.com/' + i.photos[0].md5 + '.jpeg?imageView2/2/w/400/h/400/interlace/1/q/100',
    title: i.text.substr(0, i.text.indexOf('![]')),
    content: i.text.substr(i.text.lastIndexOf(')\n\n') + 2, i.text.indexOf('////') != -1 ? i.text.indexOf('////') - i.text.lastIndexOf(')\n\n') - 2 : undefined),
    date: i.creationDate,
    id: i.uuid,
    place: i.location && i.location.placeName
  }
});
console.log(structured)
