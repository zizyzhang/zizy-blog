/**
 * Created by Zizy on 17/09/2017.
 */
let dayOne = {
  "metadata" : {
    "version" : "1.0"
  },
  "entries" : [
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13615417480469,
            "latitude" : 22.285795211791992
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13615417480469,
        "administrativeArea" : "香港",
        "placeName" : "香港皇后大道西470号",
        "latitude" : 22.285795211791992
      },
      "sourceString" : "visit-8283148C-2E1D-4651-9CC8-4BC3EAC3D5BE",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 4103
      },
      "text" : "找到了新家，去健身房的一天\n\n![](dayone-moment:\/\/D2EDDBF7F44F421BAE96773F9DC003EF)\n\n心情3分。一早上一口气看了三家之后终于还是决定了住所。除了贵一点以外应该挺完美了。想不到什么不好的。从此多了两个老年室友。干脆定下来好了。反正也就一年多的时光。健身房在山顶，爬山爬了很久。觉得每次都这样爬山健身实在是很难坚持下去阿。奶茶好喝，凉皮不好吃。",
      "weather" : {
        "sunsetDate" : "2017-09-24T10:19:01Z",
        "temperatureCelsius" : 31,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 120,
        "sunriseDate" : "2017-09-23T22:13:37Z",
        "conditionsDescription" : "Partly Cloudy",
        "pressureMB" : 1007,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 66,
        "windSpeedKPH" : 33,
        "weatherCode" : "fair",
        "windChillCelsius" : 31
      },
      "creationDate" : "2017-09-24T07:33:15Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "78E245876F9E468E970528CE3D282FA5",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "D2EDDBF7F44F421BAE96773F9DC003EF",
          "height" : 2048,
          "md5" : "ba89573629d925a7fbfb992b41c8d9da",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13718414306641,
            "latitude" : 22.28593635559082
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13718414306641,
        "administrativeArea" : "香港",
        "placeName" : "香港皇后大道西419号–421号",
        "latitude" : 22.28593635559082
      },
      "sourceString" : "visit-A41AF3B4-E0A8-4A70-9444-E1D535D39FB4",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 6058
      },
      "text" : "新同学聚餐不小心聊了四个小时的一天\n\n![](dayone-moment:\/\/B581AF9EDB184C17AAEF00493380B88A)\n\n心情4分。\n吃了家门口的泰式居然好吃的很，\n就是有点点油腻阿。\n晚上和新认识的同学们一起吃饭！\n不知道为什么位置异常多，\n还是很开心的聊天八卦不知不觉到十点。\n还是有很多厉害的同学们呐。",
      "weather" : {
        "sunsetDate" : "2017-09-26T10:17:03Z",
        "temperatureCelsius" : 30,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 130,
        "sunriseDate" : "2017-09-25T22:14:13Z",
        "conditionsDescription" : "Mostly Clear",
        "pressureMB" : 1011,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 70,
        "windSpeedKPH" : 15,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 30
      },
      "creationDate" : "2017-09-25T15:39:06Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "0A55F6EBC9EC41E38E5B816D9F63BC1A",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "B581AF9EDB184C17AAEF00493380B88A",
          "height" : 2048,
          "md5" : "5a50a2f56c69106f4702442d08328538",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13731384277344,
            "latitude" : 22.285820007324219
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13731384277344,
        "administrativeArea" : "香港",
        "placeName" : "香港第三街179号",
        "latitude" : 22.285820007324219
      },
      "creationDate" : "2017-09-26T15:44:20Z",
      "text" : "搬家完成晚上听不懂课的一天\n\n![](dayone-moment:\/\/AFF6218B4FD74110B31D7C5AABEE8288)\n\n心情3.5分。还是搬完了家开始觉得自己的未来掌握在老年室友手中。\n规矩有点多不太开心。\n下午和新同学在学习顺便做了新投资。\n晚上的安全课有点太超纲。\n希望之后一切都好。\n晚上去了健身房因为晚餐吃的有点多su还是有点好吃的心情+0.5。",
      "weather" : {
        "sunsetDate" : "2017-09-26T10:17:03Z",
        "temperatureCelsius" : 29,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 70,
        "sunriseDate" : "2017-09-25T22:14:13Z",
        "conditionsDescription" : "Mostly Clear",
        "pressureMB" : 1011,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 79,
        "windSpeedKPH" : 6,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 29
      },
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "83B220509B0C41DD99C00A46DED160C8",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "AFF6218B4FD74110B31D7C5AABEE8288",
          "height" : 2048,
          "md5" : "9c94febf9b96a0a49601c49854cf84dd",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13802337646484,
            "latitude" : 22.284889221191406
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13802337646484,
        "administrativeArea" : "香港",
        "placeName" : "香港般咸道",
        "latitude" : 22.284889221191406
      },
      "sourceString" : "visit-486410EF-47D1-4476-BE9B-1B615E510693",
      "userActivity" : {
        "activityName" : "Stationary"
      },
      "text" : "努力学习以及游泳池很棒的一天\n\n![](dayone-moment:\/\/364490218FB041A188C8B58941A0880F)\n\n心情3.8分。早上起来还是有点不习惯新的生活方式。牛奶没有微波炉热的话怎么办捏。新的挑战刚刚开始啊。然后一直在看数学，有时候觉得这种大脑超负荷运转的感觉还是很棒啊。可能虽然智商不高但是反而更能体会到超负荷的快感也说不定…总之看了整整一天才终于看懂了大概。晚上游泳池非常棒啊。",
      "weather" : {
        "sunsetDate" : "2017-09-27T10:16:04Z",
        "temperatureCelsius" : 30,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 0,
        "sunriseDate" : "2017-09-26T22:14:30Z",
        "conditionsDescription" : "Mostly Clear",
        "pressureMB" : 1011,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 75,
        "windSpeedKPH" : 2,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 30
      },
      "creationDate" : "2017-09-26T16:14:23Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "293A9100129F4137B6696D28BC579CAA",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "364490218FB041A188C8B58941A0880F",
          "height" : 2048,
          "md5" : "97e8a6ca4e6a1013d362e910f599941d",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13758850097656,
            "latitude" : 22.285898208618164
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13758850097656,
        "administrativeArea" : "香港",
        "placeName" : "香港第三街179号",
        "latitude" : 22.285898208618164
      },
      "sourceString" : "visit-910E069B-7CBD-44FC-A2E7-02DB07D54D8D",
      "userActivity" : {
        "activityName" : "Stationary"
      },
      "text" : "与小姐姐们学习以及夜游学校的一天\n\n![](dayone-moment:\/\/2432059F12C84AA79FFB3DC32D01BD9F)\n\n心情3.7分。\n早上战战兢兢吃完早餐出门。\n到现在也不能简单判断老年室友是祸是福……\n本来以为终于把电脑处理掉了结果没有。\n凌晨买了手表感觉有点开心。\n下午一直在学习觉得算是做了一些事情吧。\n只是学的有点久，有点无力感。\n晚上上课巨无聊。\n聊天吃东西更有意思。",
      "weather" : {
        "sunsetDate" : "2017-09-28T10:15:06Z",
        "temperatureCelsius" : 31,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 310,
        "sunriseDate" : "2017-09-27T22:14:48Z",
        "conditionsDescription" : "Mostly Clear",
        "pressureMB" : 1009,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 70,
        "windSpeedKPH" : 11,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 31
      },
      "creationDate" : "2017-09-27T16:25:21Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "E9249705C4DC4325B43E211794B93926",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "2432059F12C84AA79FFB3DC32D01BD9F",
          "height" : 2048,
          "md5" : "59f69eb59ab54e7f35f6e3ff41f87f77",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13723754882812,
            "latitude" : 22.285667419433594
          },
          "radius" : 75
        },
        "localityName" : "香港",
        "country" : "香港",
        "longitude" : 114.13723754882812,
        "administrativeArea" : "香港",
        "placeName" : "香港第三街179号",
        "latitude" : 22.285667419433594
      },
      "creationDate" : "2017-09-29T15:45:46Z",
      "text" : "下午IHP印度餐厅打卡拿到新手表的一天\n\n![](dayone-moment:\/\/203369D283CC4B48872827148C5FC530)\n\n心情3.3分\n其实白天还是过的很颓\n终于卖出了心爱的air感觉有点小失落\n早上搞懂了m3为什么等于M的中国剩余定理。下午先健身在吃饭前感觉就是会吃很多啊？？新手表还是很好看的。",
      "weather" : {
        "sunsetDate" : "2017-09-29T10:14:07Z",
        "temperatureCelsius" : 30,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 120,
        "sunriseDate" : "2017-09-28T22:15:07Z",
        "conditionsDescription" : "Mostly Clear",
        "pressureMB" : 1013,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 70,
        "windSpeedKPH" : 20,
        "weatherCode" : "cloudy-night",
        "windChillCelsius" : 30
      },
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "5000F8809E6E4D8E97BF3BF900ADB6F5",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "203369D283CC4B48872827148C5FC530",
          "height" : 2048,
          "md5" : "2e20ff3144eacc1eca1b9eec5f59c0a5",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 113.53779602050781,
            "latitude" : 22.232643127441406
          },
          "radius" : 75
        },
        "localityName" : "珠海市",
        "country" : "中国",
        "longitude" : 113.53779602050781,
        "administrativeArea" : "广东省",
        "placeName" : "粤海中路2272号",
        "latitude" : 22.232643127441406
      },
      "sourceString" : "visit-30C47699-BD8D-4749-B7FA-A8C0E40B7B56",
      "userActivity" : {
        "activityName" : "Stationary"
      },
      "text" : "澳门持续打卡赌场输了50的一天\n\n![](dayone-moment:\/\/78539B58B3784DF190776F628D81F07C)\n\n心情3.1分\n早上睡醒的时候觉得应该要出去走走的。\n然后澳门感觉要比想象的还小。\n没怎么逛就逛完了。\n没有地铁不是很方便，但总有一种没香港那么忙碌的感觉。\n吃了牛杂这么辣到怀疑人生，汗水完全停不下来，边上的人估计以为我快死了？？？\n砂锅粥还是很好吃。\n晚上的时候开始回忆过往的经历。\n明明也没什么遗憾了吧。\n也许在一开始的时候也不过就是思考到这个阶段而已。我没办法设想接下来的人生应该是什么样子。也无法决定应该和怎样的人在一起度过余下生命。",
      "weather" : {
        "sunsetDate" : "2017-09-30T10:14:31Z",
        "temperatureCelsius" : 29,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 100,
        "sunriseDate" : "2017-09-29T22:16:43Z",
        "conditionsDescription" : "Partly Cloudy",
        "pressureMB" : 1014,
        "visibilityKM" : 48.280319213867188,
        "relativeHumidity" : 89,
        "windSpeedKPH" : 28,
        "weatherCode" : "fair",
        "windChillCelsius" : 29
      },
      "creationDate" : "2017-09-30T01:22:52Z",
      "timeZone" : "Asia\/Shanghai",
      "uuid" : "CE85D2FDBAA24FDD849E74B71BE9C9FD",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "78539B58B3784DF190776F628D81F07C",
          "height" : 2048,
          "md5" : "30dae5b49350526a73afbc3b696d92c8",
          "focalLength" : "(null)"
        }
      ]
    }
  ]};


let structured = dayOne.entries.map(i => {
  return {
    img_url: 'http://owdi2r4ca.bkt.clouddn.com/' + i.photos[0].md5 + '.jpeg?imageView2/2/w/400/h/400/interlace/1/q/100',
    title: i.text.substr(0, i.text.indexOf('![]')),
    content: i.text.substr(i.text.lastIndexOf(')\n\n') + 2, i.text.indexOf('////') != -1? i.text.indexOf('////') - i.text.lastIndexOf(')\n\n') - 2 : undefined),
    date: i.creationDate,
    id: i.uuid,
    place: i.location && i.location.placeName
  }
});
console.log(structured)
