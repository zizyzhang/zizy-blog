/**
 * Created by Zizy on 17/09/2017.
 */


let dayOne ={
  "metadata" : {
    "version" : "1.0"
  },
  "entries" : [
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.13893890380859,
            "latitude" : 22.287174224853516
          },
          "radius" : 75
        },
        "localityName" : "Hong Kong",
        "country" : "Hong Kong",
        "longitude" : 114.13893890380859,
        "administrativeArea" : "Hong Kong",
        "placeName" : "1C–1F Water Street, Hong Kong",
        "latitude" : 22.287174224853516
      },
      "sourceString" : "visit-4B7C36BD-97A5-4464-BEDC-391EFFE01546",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 6753
      },
      "text" : "被百度坑，天天打游戏略微颓废的一周\n\n![](dayone-moment:\/\/A7C62E0432514C3B979994F4C808BBE4)\n\n心情3分。开始是百度降权，不知道什么时候可以回到首页，或者就永远回不了了……\n看着人数慢慢变少还是有点揪心。略微沉迷平安京，可能还是要开黑才比较有意思。打卡好不容易才看到的毛豆百力滋。\n游戏，DL和kaggle都在有序进行，找到了新的boss。",
      "weather" : {
        "temperatureCelsius" : 15,
        "weatherServiceName" : "Forecast.io",
        "windBearing" : 48,
        "sunriseDate" : "1970-01-01T00:00:00Z",
        "conditionsDescription" : "Clear",
        "pressureMB" : 1025.3199462890625,
        "visibilityKM" : 9,
        "relativeHumidity" : 62,
        "windSpeedKPH" : 17.770000457763672,
        "weatherCode" : "clear-night",
        "sunsetDate" : "1970-01-01T00:00:00Z"
      },
      "creationDate" : "2018-02-11T15:29:09Z",
      "timeZone" : "Asia\/Hong_Kong",
      "uuid" : "D945EA17B1F348E2A522A1C35B7ECD48",
      "duration" : 0,
      "photos" : [
        {
          "fnumber" : "(null)",
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "A7C62E0432514C3B979994F4C808BBE4",
          "date" : "2018-02-11T15:29:09Z",
          "location" : {
            "region" : {
              "center" : {
                "longitude" : 114.13893890380862,
                "latitude" : 22.287174221936461
              },
              "identifier" : "<+22.28717422,+114.13893890> radius 141.83",
              "radius" : 141.83259967455615
            },
            "localityName" : "Hong Kong",
            "country" : "Hong Kong",
            "timeZoneName" : "Asia\/Hong_Kong",
            "administrativeArea" : "Hong Kong",
            "longitude" : 114.13893890380859,
            "placeName" : "1C–1F Water Street, Hong Kong",
            "latitude" : 22.287174224853516
          },
          "height" : 2048,
          "md5" : "98b1bd79ed3660e15923417f13dcf301",
          "focalLength" : "(null)"
        }
      ]
    },
    {
      "starred" : false,
      "location" : {
        "region" : {
          "center" : {
            "longitude" : 114.18224334716797,
            "latitude" : 22.278812408447266
          },
          "radius" : 75
        },
        "localityName" : "Hong Kong",
        "country" : "Hong Kong",
        "longitude" : 114.18224334716797,
        "administrativeArea" : "Hong Kong",
        "placeName" : "26 Russell Street, Hong Kong",
        "latitude" : 22.278812408447266
      },
      "sourceString" : "visit-EDE263F2-A70F-4068-BCDD-22191A12A544",
      "userActivity" : {
        "activityName" : "Stationary",
        "stepCount" : 697
      },
      "text" : "被腾讯也欺负我人生里最无聊的新年的一周\n\n![](dayone-moment:\/\/32A02AAC89E1463092A4BE125674D9AB)\n\n心情2.5分。\n放假前两天意外混入一次聚餐。\n在深圳过了新年吃了感觉很不容易才能订到的年夜饭火锅。腾讯屏蔽了叔叔不约，不过考虑到微信一直不是什么传播途径也就稍微不担心一点。\n希望最近已经把坏事都发生完了。\n收入慢慢回到了预估的正常水准。\n虽然一直在一个我还很难一下子接受的范围。也不知道能持续多久以及未来，还有多少小坎坷可能发生。\n一次惊喜的人数增长，但伴随着的也是相同的麻烦。\n新年逛商场逛到想吐。可能是人生中最无聊的新年。\n感觉自己现在最需要的就是一个长长假期，什么麻烦事情都不需要考虑，或者不需要那么经常考虑。\n也许这种加速版的人生也不是什么坏事，很多人可能一生难有这样刺激的心情也说不定。感觉在人群里默默的小骄傲也是一件快乐的事情。\n如果可以希望自己再有勇气一点。\n自己的生活似乎也恰恰是几年前最希望的样子。也许很难把握怎么样是最恰好。至少所谓的麻烦也只是意料之中的一部分。\n除此以外，这个新年真是抖音救了我的命。",
      "weather" : {
        "sunsetDate" : "2018-02-19T10:23:12Z",
        "temperatureCelsius" : 24,
        "weatherServiceName" : "HAMweather",
        "windBearing" : 290,
        "sunriseDate" : "2018-02-18T22:53:06Z",
        "conditionsDescription" : "Hazy",
        "pressureMB" : 1015,
        "visibilityKM" : 4.5999999046325684,
        "relativeHumidity" : 65,
        "windSpeedKPH" : 9,
        "weatherCode" : "hazy",
        "windChillCelsius" : 24
      },
      "creationDate" : "2018-02-19T05:07:51Z",
      "timeZone" : "Asia\/Shanghai",
      "uuid" : "9BDB3D2F359445B09BF2BBFF4160DFBA",
      "duration" : 0,
      "photos" : [
        {
          "orderInEntry" : 0,
          "width" : 2048,
          "type" : "jpeg",
          "identifier" : "32A02AAC89E1463092A4BE125674D9AB",
          "height" : 2048,
          "md5" : "de2d2137d4921fabc272e97bd518b135"
        }
      ]
    }
  ]};


let structured = dayOne.entries.map(i => {
  return {
    img_url: 'http://owdi2r4ca.bkt.clouddn.com/' + i.photos[0].md5 + '.jpeg?imageView2/2/w/400/h/400/interlace/1/q/100',
    title: i.text.substr(0, i.text.indexOf('![]')),
    content: i.text.substr(i.text.lastIndexOf(')\n\n') + 2, i.text.indexOf('////') != -1 ? i.text.indexOf('////') - i.text.lastIndexOf(')\n\n') - 2 : undefined),
    date: i.creationDate,
    id: i.uuid,
    place: i.location && i.location.placeName
  }
});
console.log(structured)
